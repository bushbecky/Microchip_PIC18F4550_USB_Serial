MP2COD 3.90.01, COFF to COD File Converter
Copyright (c) 2005 Microchip Technology Inc.
Listing File Generated: Sat Mar 19 16:28:31 2005


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /* $Id: c018i.c,v 1.3 2004/07/30 17:28:43 ConnerJ Exp $ */                       C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 startup code, including initialized data */                         C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* external reference to the user's main routine */                              C:\mcc18\src\traditional\startup\c018i.c
                                           extern void main (void);                                                         C:\mcc18\src\traditional\startup\c018i.c
                                           /* prototype for the startup function */                                         C:\mcc18\src\traditional\startup\c018i.c
                                           void _entry (void);                                                              C:\mcc18\src\traditional\startup\c018i.c
                                           void _startup (void);                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* prototype for the initialized data setup */                                   C:\mcc18\src\traditional\startup\c018i.c
                                           void _do_cinit (void);                                                           C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           extern volatile near unsigned long short TBLPTR;                                 C:\mcc18\src\traditional\startup\c018i.c
                                           extern near unsigned FSR0;                                                       C:\mcc18\src\traditional\startup\c018i.c
                                           extern near char FPFLAGS;                                                        C:\mcc18\src\traditional\startup\c018i.c
                                           #define RND 6                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           #pragma code _entry_scn=0x000000                                                 C:\mcc18\src\traditional\startup\c018i.c
                                           void                                                                             C:\mcc18\src\traditional\startup\c018i.c
                                           _entry (void)                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                           {                                                                                C:\mcc18\src\traditional\startup\c018i.c
000000   efef     GOTO      0x19de         _asm goto _startup _endasm                                                       C:\mcc18\src\traditional\startup\c018i.c
000002   f00c                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
000004   0012     RETURN    0x0            }                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                           #pragma code _startup_scn                                                        C:\mcc18\src\traditional\startup\c018i.c
                                           void                                                                             C:\mcc18\src\traditional\startup\c018i.c
                                           _startup (void)                                                                  C:\mcc18\src\traditional\startup\c018i.c
                                           {                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                             _asm                                                                           C:\mcc18\src\traditional\startup\c018i.c
                                               // Initialize the stack pointer                                              C:\mcc18\src\traditional\startup\c018i.c
0019de   ee13     LFSR      0x1,0x300          lfsr 1, _stack                                                               C:\mcc18\src\traditional\startup\c018i.c
0019e0   f000                                                                                                               
0019e2   ee23     LFSR      0x2,0x300          lfsr 2, _stack                                                               C:\mcc18\src\traditional\startup\c018i.c
0019e4   f000                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
0019e6   6af8     CLRF      0xf8,0x0           clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR                        C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
0019e8   9c0f     BCF       0xf,0x6,0x0        bcf FPFLAGS,RND,0 // Initialize rounding flag for floating point libs        C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\mcc18\src\traditional\startup\c018i.c
0019ea   ecbb     CALL      0x1776,0x0         _do_cinit ();                                                                C:\mcc18\src\traditional\startup\c018i.c
0019ec   f00b                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           loop:                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                             // Call the user's main routine                                                C:\mcc18\src\traditional\startup\c018i.c
0019ee   ec8f     CALL      0x191e,0x0       main ();                                                                       C:\mcc18\src\traditional\startup\c018i.c
0019f0   f00c                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
0019f2   d7fd     BRA       0x19ee           goto loop;                                                                     C:\mcc18\src\traditional\startup\c018i.c
0019f4   0012     RETURN    0x0            }                               /* end _startup() */                             C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 initialized data memory support */                                  C:\mcc18\src\traditional\startup\c018i.c
                                           /* The linker will populate the _cinit table */                                  C:\mcc18\src\traditional\startup\c018i.c
                                           extern far rom struct                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           {                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                             unsigned short num_init;                                                       C:\mcc18\src\traditional\startup\c018i.c
                                             struct _init_entry                                                             C:\mcc18\src\traditional\startup\c018i.c
                                             {                                                                              C:\mcc18\src\traditional\startup\c018i.c
                                               unsigned long from;                                                          C:\mcc18\src\traditional\startup\c018i.c
                                               unsigned long to;                                                            C:\mcc18\src\traditional\startup\c018i.c
                                               unsigned long size;                                                          C:\mcc18\src\traditional\startup\c018i.c
                                             }                                                                              C:\mcc18\src\traditional\startup\c018i.c
                                             entries[];                                                                     C:\mcc18\src\traditional\startup\c018i.c
                                           }                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                           _cinit;                                                                          C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           #pragma code _cinit_scn                                                          C:\mcc18\src\traditional\startup\c018i.c
                                           void                                                                             C:\mcc18\src\traditional\startup\c018i.c
                                           _do_cinit (void)                                                                 C:\mcc18\src\traditional\startup\c018i.c
                                           {                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                             /* we'll make the assumption in the following code that these statics          C:\mcc18\src\traditional\startup\c018i.c
                                              * will be allocated into the same bank.                                       C:\mcc18\src\traditional\startup\c018i.c
                                              */                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                             static short long prom;                                                        C:\mcc18\src\traditional\startup\c018i.c
                                             static unsigned short curr_byte;                                               C:\mcc18\src\traditional\startup\c018i.c
                                             static unsigned short curr_entry;                                              C:\mcc18\src\traditional\startup\c018i.c
                                             static short long data_ptr;                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                             // Initialized data...                                                         C:\mcc18\src\traditional\startup\c018i.c
001776   0e2a     MOVLW     0x2a             TBLPTR = (short long)&_cinit;                                                  C:\mcc18\src\traditional\startup\c018i.c
001778   6ef6     MOVWF     0xf6,0x0                                                                                        
00177a   0e08     MOVLW     0x8                                                                                             
00177c   6ef7     MOVWF     0xf7,0x0                                                                                        
00177e   0e00     MOVLW     0x0                                                                                             
001780   6ef8     MOVWF     0xf8,0x0                                                                                        
                                             _asm                                                                           C:\mcc18\src\traditional\startup\c018i.c
001782   0101     MOVLB     0x1                movlb data_ptr                                                               C:\mcc18\src\traditional\startup\c018i.c
001784   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\mcc18\src\traditional\startup\c018i.c
001786   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\mcc18\src\traditional\startup\c018i.c
001788   6f11     MOVWF     0x11,0x1           movwf curr_entry, 1                                                          C:\mcc18\src\traditional\startup\c018i.c
00178a   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\mcc18\src\traditional\startup\c018i.c
00178c   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\mcc18\src\traditional\startup\c018i.c
00178e   6f12     MOVWF     0x12,0x1           movwf curr_entry+1, 1                                                        C:\mcc18\src\traditional\startup\c018i.c
                                             _endasm                                                                        C:\mcc18\src\traditional\startup\c018i.c
                                               //while (curr_entry)                                                         C:\mcc18\src\traditional\startup\c018i.c
                                               //{                                                                          C:\mcc18\src\traditional\startup\c018i.c
                                               test:                                                                        C:\mcc18\src\traditional\startup\c018i.c
                                               _asm                                                                         C:\mcc18\src\traditional\startup\c018i.c
001790   e103     BNZ       0x1798              bnz 3                                                                       C:\mcc18\src\traditional\startup\c018i.c
001792   6711     TSTFSZ    0x11,0x1           tstfsz curr_entry, 1                                                         C:\mcc18\src\traditional\startup\c018i.c
001794   d001     BRA       0x1798             bra 1                                                                        C:\mcc18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\mcc18\src\traditional\startup\c018i.c
001796   d03d     BRA       0x1812             goto done;                                                                   C:\mcc18\src\traditional\startup\c018i.c
                                                 /* Count down so we only have to look up the data in _cinit                C:\mcc18\src\traditional\startup\c018i.c
                                                  * once.                                                                   C:\mcc18\src\traditional\startup\c018i.c
                                                  *                                                                         C:\mcc18\src\traditional\startup\c018i.c
                                                  * At this point we know that TBLPTR points to the top of the current      C:\mcc18\src\traditional\startup\c018i.c
                                                  * entry in _cinit, so we can just start reading the from, to, and         C:\mcc18\src\traditional\startup\c018i.c
                                                  * size values.                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\mcc18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\mcc18\src\traditional\startup\c018i.c
                                           	/* read the source address */                                                   C:\mcc18\src\traditional\startup\c018i.c
001798   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
00179a   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
00179c   6f0c     MOVWF     0xc,0x1        	movwf prom, 1                                                                   C:\mcc18\src\traditional\startup\c018i.c
00179e   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017a0   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017a2   6f0d     MOVWF     0xd,0x1        	movwf prom+1, 1                                                                 C:\mcc18\src\traditional\startup\c018i.c
0017a4   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017a6   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017a8   6f0e     MOVWF     0xe,0x1        	movwf prom+2, 1                                                                 C:\mcc18\src\traditional\startup\c018i.c
                                           	/* skip a byte since it's stored as a 32bit int */                              C:\mcc18\src\traditional\startup\c018i.c
0017aa   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\mcc18\src\traditional\startup\c018i.c
0017ac   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017ae   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017b0   6ee9     MOVWF     0xe9,0x0       	movwf FSR0L, 0                                                                  C:\mcc18\src\traditional\startup\c018i.c
0017b2   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017b4   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017b6   6eea     MOVWF     0xea,0x0       	movwf FSR0H, 0                                                                  C:\mcc18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\mcc18\src\traditional\startup\c018i.c
0017b8   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017ba   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\mcc18\src\traditional\startup\c018i.c
0017bc   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017be   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017c0   6f0f     MOVWF     0xf,0x1        	movwf curr_byte, 1                                                              C:\mcc18\src\traditional\startup\c018i.c
0017c2   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017c4   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017c6   6f10     MOVWF     0x10,0x1       	movwf curr_byte+1, 1                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\mcc18\src\traditional\startup\c018i.c
0017c8   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017ca   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                 //prom = data_ptr->from;                                                   C:\mcc18\src\traditional\startup\c018i.c
                                                 //FSR0 = data_ptr->to;                                                     C:\mcc18\src\traditional\startup\c018i.c
                                                 //curr_byte = (unsigned short) data_ptr->size;                             C:\mcc18\src\traditional\startup\c018i.c
                                                 /* the table pointer now points to the next entry. Save it                 C:\mcc18\src\traditional\startup\c018i.c
                                                  * off since we'll be using the table pointer to do the copying            C:\mcc18\src\traditional\startup\c018i.c
                                                  * for the entry.                                                          C:\mcc18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\mcc18\src\traditional\startup\c018i.c
0017cc   cff6     MOVFF     0xff6,0x113          data_ptr = TBLPTR;                                                         C:\mcc18\src\traditional\startup\c018i.c
0017ce   f113                                                                                                               
0017d0   cff7     MOVFF     0xff7,0x114                                                                                     
0017d2   f114                                                                                                               
0017d4   cff8     MOVFF     0xff8,0x115                                                                                     
0017d6   f115                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                 /* now assign the source address to the table pointer */                   C:\mcc18\src\traditional\startup\c018i.c
0017d8   c10c     MOVFF     0x10c,0xff6          TBLPTR = prom;                                                             C:\mcc18\src\traditional\startup\c018i.c
0017da   fff6                                                                                                               
0017dc   c10d     MOVFF     0x10d,0xff7                                                                                     
0017de   fff7                                                                                                               
0017e0   c10e     MOVFF     0x10e,0xff8                                                                                     
0017e2   fff8                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                 /* do the copy loop */                                                     C:\mcc18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\mcc18\src\traditional\startup\c018i.c
                                                   // determine if we have any more bytes to copy                           C:\mcc18\src\traditional\startup\c018i.c
0017e4   0101     MOVLB     0x1            	movlb curr_byte                                                                 C:\mcc18\src\traditional\startup\c018i.c
0017e6   530f     MOVF      0xf,0x1,0x1    	movf curr_byte, 1, 1                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           copy_loop:                                                                       C:\mcc18\src\traditional\startup\c018i.c
0017e8   e102     BNZ       0x17ee         	bnz 2 // copy_one_byte                                                          C:\mcc18\src\traditional\startup\c018i.c
0017ea   5310     MOVF      0x10,0x1,0x1   	movf curr_byte + 1, 1, 1                                                        C:\mcc18\src\traditional\startup\c018i.c
0017ec   e007     BZ        0x17fc         	bz 7 // done_copying                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           copy_one_byte:                                                                   C:\mcc18\src\traditional\startup\c018i.c
0017ee   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017f0   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017f2   6eee     MOVWF     0xee,0x0       	movwf POSTINC0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           	// decrement byte counter                                                       C:\mcc18\src\traditional\startup\c018i.c
0017f4   070f     DECF      0xf,0x1,0x1    	decf curr_byte, 1, 1                                                            C:\mcc18\src\traditional\startup\c018i.c
0017f6   e2f8     BC        0x17e8         	bc -8 // copy_loop                                                              C:\mcc18\src\traditional\startup\c018i.c
0017f8   0710     DECF      0x10,0x1,0x1           decf curr_byte + 1, 1, 1                                                 C:\mcc18\src\traditional\startup\c018i.c
0017fa   d7f9     BRA       0x17ee         	bra -7 // copy_one_byte                                                         C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           done_copying:                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                 /* restore the table pointer for the next entry */                         C:\mcc18\src\traditional\startup\c018i.c
0017fc   c113     MOVFF     0x113,0xff6          TBLPTR = data_ptr;                                                         C:\mcc18\src\traditional\startup\c018i.c
0017fe   fff6                                                                                                               
001800   c114     MOVFF     0x114,0xff7                                                                                     
001802   fff7                                                                                                               
001804   c115     MOVFF     0x115,0xff8                                                                                     
001806   fff8                                                                                                               
                                                 /* next entry... */                                                        C:\mcc18\src\traditional\startup\c018i.c
001808   0101     MOVLB     0x1                  curr_entry--;                                                              C:\mcc18\src\traditional\startup\c018i.c
00180a   0711     DECF      0x11,0x1,0x1                                                                                    
00180c   0e00     MOVLW     0x0                                                                                             
00180e   5b12     SUBWFB    0x12,0x1,0x1                                                                                    
001810   d7bf     BRA       0x1790               goto test;                                                                 C:\mcc18\src\traditional\startup\c018i.c
                                           done:                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           ;                                                                                C:\mcc18\src\traditional\startup\c018i.c
001812   0012     RETURN    0x0            }                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * FileName:        main.c                                                       C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           #include "system\typedefs.h"                        // Required                  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           #include "system\usb\usb.h"                         // Required                  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           #include "io_cfg.h"                                 // Required                  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           #include "user\user.h"                              // Modifiable                C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           static void InitializeSystem(void);                                              C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           void USBTasks(void);                                                             C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Function:        void main(void)                                              C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Overview:        Main program entry point.                                    C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           void main(void)                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\main.c
00191e   d805     RCALL     0x192a             InitializeSystem();                                                          C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001926   d7fc     BRA       0x1920             while(1)                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001920   d810     RCALL     0x1942                 USBTasks();         // USB Tasks                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001922   eceb     CALL      0x11d6,0x0             ProcessIO();        // See user\user.c & .h                              C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001924   f008                                                                                                               
                                               }//end while                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001928   0012     RETURN    0x0            }//end main                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Function:        static void InitializeSystem(void)                           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Overview:        InitializeSystem is a centralize initialization routine.     C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                  All required USB initialization routines are called from     C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                  here.                                                        C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                  User application initialization routine should also be       C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                  called from here.                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           static void InitializeSystem(void)                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\main.c
00192a   0e0f     MOVLW     0xf                ADCON1 |= 0x0F;                 // Default all pins to digital               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
00192c   12c1     IORWF     0xc1,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               #if defined(USE_USB_BUS_SENSE_IO)                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               tris_usb_bus_sense = INPUT_PIN; // See io_cfg.h                              C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               #endif                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               #if defined(USE_SELF_POWER_SENSE_IO)                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               tris_self_power = INPUT_PIN;                                                 C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               #endif                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
00192e   0e14     MOVLW     0x14               mInitializeUSBDriver();         // See usbdrv.h                              C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001930   6e6f     MOVWF     0x6f,0x0                                                                                        
001932   0101     MOVLB     0x1                                                                                             
001934   6b1e     CLRF      0x1e,0x1                                                                                        
001936   0101     MOVLB     0x1                                                                                             
001938   6b1f     CLRF      0x1f,0x1                                                                                        
00193a   0101     MOVLB     0x1                                                                                             
00193c   6b20     CLRF      0x20,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
00193e   efca     GOTO      0x1194             UserInit();                     // See user.c & .h                           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001940   f008                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           }//end InitializeSystem                                                          C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Function:        void USBTasks(void)                                          C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * PreCondition:    InitializeSystem has been called.                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Overview:        Service loop for USB tasks.                                  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           void USBTasks(void)                                                              C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                * Servicing Hardware                                                        C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001942   ec98     CALL      0x1530,0x0         USBCheckBusStatus();                    // Must use polling method           C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001944   f00a                                                                                                               
001946   be6f     BTFSC     0x6f,0x7,0x0       if(UCFGbits.UTEYE!=1)                                                        C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001948   d002     BRA       0x194e                                                                                          
00194a   ecb7     CALL      0x156e,0x0             USBDriverService();                 // Interrupt or polling method       C:\MCHPFSUSB PICC18\fw\Cdc\main.c
00194c   f00a                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                               #if defined(USB_USE_CDC)                                                     C:\MCHPFSUSB PICC18\fw\Cdc\main.c
00194e   ef5f     GOTO      0xabe              CDCTxService();                                                              C:\MCHPFSUSB PICC18\fw\Cdc\main.c
001950   f005                                                                                                               
                                               #endif                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           }// end USBTasks                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /** EOF main.c ***************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\main.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * FileName:        usbmmap.c                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * -usbmmap.c-                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * USB Memory Map                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * This file is the USB memory manager; it serves as a compile-time memory       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * allocator for the USB endpoints. It uses the compile time options passed      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * from usbcfg.h to instantiate endpoints and endpoint buffer.                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Each endpoint requires to have a set of Buffer Descriptor registers(BDT).     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * A BDT is 4-byte long and has a specific RAM location for each endpoint.       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 out is located at address 0x400 to 0x403.              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 in is located at address 0x404 to 0x407.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The BDT for endpoint 1 out is located at address 0x408 to 0x40B.              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * and so on... The above allocation assumes the Ping-Pong Buffer Mode 0 is      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * used. These locations are already hard-wired in the silicon. The point        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * of doing instantiation, i.e. volatile far BDT ep0Bo;, is to provide the       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * C compiler a way to address each variable directly. This is very important    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * because when a register can be accessed directly, it saves execution time     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * and reduces program size.                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Endpoints are defined using the endpoint number and the direction             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * of transfer. For simplicity, usbmmap.c only uses the endpoint number          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * in the BDT register allocation scheme. This means if the usbcfg.h states      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * that the MAX_EP_NUMBER is number 1, then four BDTs will be                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * instantiated: one each for endpoint0 in and endpoint0 out, which must         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * always be instantiated for control transfer by default, and one each sets     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * for endpoint1 in and endpoint1 out. The naming convention for instantiating   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * BDT is                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * ep<#>B<d>                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * where # is the endpoint number, and d is the direction of                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * transfer, which could be either <i> or <o>.                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The USB memory manager uses MAX_EP_NUMBER, as defined in usbcfg.h, to define  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * the endpoints to be instantiated. This represents the highest endpoint        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * number to be allocated, not how many endpoints are used. Since the BDTs for   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * endpoints have hardware-assigned addresses in Bank 4, setting this value too  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * high may lead to inefficient use of data RAM. For example, if an application  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * uses only endpoints EP0 and EP4, then the MAX_EP_NUMBER is 4, and not 2.      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The in-between endpoint BDTs in this example (EP1, EP2, and EP3) go unused,   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * and the 24 bytes of memory associated with them are wasted. It does not make  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * much sense to skip endpoints, but the final decision lies with the user.      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The next step is to assign the instantiated BDTs to different                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * USB functions. The firmware framework fundamentally assumes that every USB    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * function should know which endpoint it is using, i.e., the default control    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * transfer should know that it is using endpoint 0 in and endpoint 0 out.       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * A HID class can choose which endpoint it wants to use, but once chosen, it    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * should always know the number of the endpoint.                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The assignment of endpoints to USB functions is managed centrally             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * in usbcfg.h. This helps prevent the mistake of having more                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * than one USB function using the same endpoint. The "Endpoint Allocation"      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * section in usbcfg.h provides examples for how to map USB endpoints to USB     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * functions.                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Quite a few things can be mapped in that section. There is no                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * one correct way to do the mapping and the user has the choice to              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * choose a method that is most suitable to the application.                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Typically, however, a user will want to map the following for a given         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * USB interface function:                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * 1. The USB interface ID                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * 2. The endpoint control registers (UEPn)                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * 3. The BDT registers (ep<#>B<d>)                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * 4. The endpoint size                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Example: Assume a USB device class "foo", which uses one out endpoint         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *          of size 64-byte and one in endpoint of size 64-byte, then:           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_INTF_ID          0x00                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_UEP              UEP1                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_BD_OUT           ep1Bo                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_BD_IN            ep1Bi                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_EP_SIZE          64                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The mapping above has chosen class "foo" to use endpoint 1.                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The names are arbitrary and can be anything other than FOO_??????.            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * For abstraction, the code for class "foo" should use the abstract             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * definitions of FOO_BD_OUT,FOO_BD_IN, and not ep1Bo or ep1Bi.                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Note that the endpoint size defined in the usbcfg.h file is again             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * used in the usbmmap.c file. This shows that the relationship between          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * the two files are tightly related.                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The endpoint buffer for each USB function must be located in the              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * dual-port RAM area and has to come after all the BDTs have been               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * instantiated. An example declaration is:                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * volatile far unsigned char[FOO_EP_SIZE] data;                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * The 'volatile' keyword tells the compiler not to perform any code             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * optimization on this variable because its content could be modified           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * by the hardware. The 'far' keyword tells the compiler that this variable      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * is not located in the Access RAM area (0x000 - 0x05F).                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * For the variable to be globally accessible by other files, it should be       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * declared in the header file usbmmap.h as an extern definition, such as        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * extern volatile far unsigned char[FOO_EP_SIZE] data;                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Conclusion:                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * In a short summary, the dependencies between usbcfg and usbmmap can           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * be shown as:                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * usbcfg[MAX_EP_NUMBER] -> usbmmap                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * usbmmap[ep<#>B<d>] -> usbcfg                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * usbcfg[EP size] -> usbmmap                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * usbcfg[abstract ep definitions] -> usb9/hid/cdc/etc class code                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * usbmmap[endpoint buffer variable] -> usb9/hid/cdc/etc class code              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Data mapping provides a means for direct addressing of BDT and endpoint       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * buffer. This means less usage of pointers, which equates to a faster and      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * smaller program code.                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Section A: Buffer Descriptor Table                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * - 0x400 - 0x4FF(max)                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #ifdef MAX_EP_NUMBER                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           volatile far EndpointType ep[MAX_EP_NUMBER];         //Endpoints #0 BD Out       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Section B: EP0 Buffer Space                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            ******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * - Two buffer areas are defined:                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *   A. CTRL_TRF_SETUP                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *   B. CTRL_TRF_DATA                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            * Section C: CDC Buffer                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            ******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #pragma udata usbram5a=0x500    //See Linker Script,usb5:0x500-...               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #if defined(USB_USE_CDC)                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_notice[CDC_INT_EP_SIZE];                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_data_rx[CDC_BULK_OUT_EP_SIZE];                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_data_tx[CDC_BULK_IN_EP_SIZE];                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           /** EOF usbmmap.c ************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbmmap.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * FileName:        usbdrv.c                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           byte usb_active_cfg;            // Value of current configuration                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                           // setting for each interface ID                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /**************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Bus Attachment & Detachment Detection                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_ATTACHED    1                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_DETACHED    0                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001530   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001532   d80f     RCALL     0x1552                     USBModuleEnable();                  // Is off, enable it             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001534   d002     BRA       0x153a             else                                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001536   b66d     BTFSC     0x6d,0x3,0x0           if(UCONbits.USBEN == 1)                 // Is the module on?             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001538   d813     RCALL     0x1560                     USBModuleDisable();                 // Is on, disable it             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_bus_sense...)                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00153a   0101     MOVLB     0x1                if(usb_device_state == ATTACHED_STATE)                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00153c   051e     DECF      0x1e,0x0,0x1                                                                                    
00153e   e108     BNZ       0x1550                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001540   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001542   d006     BRA       0x1550                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001544   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001546   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001548   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00154a   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00154c   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00154e   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001550   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleEnable(void)                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables the USB module.                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void)                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001552   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001554   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001556   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001558   0101     MOVLB     0x1                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00155a   0e01     MOVLW     0x1                                                                                             
00155c   6f1e     MOVWF     0x1e,0x1                                                                                        
00155e   0012     RETURN    0x0            }//end USBModuleEnable                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleDisable(void)                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine disables the USB module.                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void)                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001560   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001562   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001564   0101     MOVLB     0x1                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001566   6b1e     CLRF      0x1e,0x1                                                                                        
001568   0012     RETURN    0x0            }//end USBModuleDisable                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSoftDetach(void)                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  pull-up resistor. The pull-down resistors on the host        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  side will pull both differential signal lines low and        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the host registers the event as a disconnect.                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  Since the USB cable is not physically disconnected, the      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  power supply through the cable can still be sensed by        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the device. The next time USBCheckBusStatus() function       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  is called, it will reconnect the device back to the bus.     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBSoftDetach(void)                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00156a   efb0     GOTO      0x1560             USBModuleDisable();                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00156c   f00a                                                                                                               
                                           }//end USBSoftDetach                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if USB cable is not even attached.        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00156e   0101     MOVLB     0x1                if(usb_device_state == DETACHED_STATE) return;                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001570   511e     MOVF      0x1e,0x0,0x1                                                                                    
001572   e101     BNZ       0x1576                                                                                          
001574   d03a     BRA       0x15ea                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001576   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001578   0b04     ANDLW     0x4                                                                                             
00157a   e004     BZ        0x1584                                                                                          
00157c   5069     MOVF      0x69,0x0,0x0                                                                                    
00157e   0b04     ANDLW     0x4                                                                                             
001580   e001     BZ        0x1584                                                                                          
001582   d83c     RCALL     0x15fc                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the device is in suspend mode.         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001584   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001586   d031     BRA       0x15ea                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001588   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00158a   0b01     ANDLW     0x1                                                                                             
00158c   e004     BZ        0x1596                                                                                          
00158e   5069     MOVF      0x69,0x0,0x0                                                                                    
001590   0b01     ANDLW     0x1                                                                                             
001592   e001     BZ        0x1596                                                                                          
001594   d854     RCALL     0x163e                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001596   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001598   0b10     ANDLW     0x10                                                                                            
00159a   e004     BZ        0x15a4                                                                                          
00159c   5069     MOVF      0x69,0x0,0x0                                                                                    
00159e   0b10     ANDLW     0x10                                                                                            
0015a0   e001     BZ        0x15a4                                                                                          
0015a2   d824     RCALL     0x15ec                                                                                          
0015a4   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015a6   0b40     ANDLW     0x40                                                                                            
0015a8   e004     BZ        0x15b2                                                                                          
0015aa   5069     MOVF      0x69,0x0,0x0                                                                                    
0015ac   0b40     ANDLW     0x40                                                                                            
0015ae   e001     BZ        0x15b2                                                                                          
0015b0   d83b     RCALL     0x1628                                                                                          
0015b2   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015b4   0b20     ANDLW     0x20                                                                                            
0015b6   e004     BZ        0x15c0                                                                                          
0015b8   5069     MOVF      0x69,0x0,0x0                                                                                    
0015ba   0b20     ANDLW     0x20                                                                                            
0015bc   e001     BZ        0x15c0                                                                                          
0015be   d836     RCALL     0x162c                                                                                          
0015c0   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015c2   0b02     ANDLW     0x2                                                                                             
0015c4   e004     BZ        0x15ce                                                                                          
0015c6   5069     MOVF      0x69,0x0,0x0                                                                                    
0015c8   0b02     ANDLW     0x2                                                                                             
0015ca   e001     BZ        0x15ce                                                                                          
0015cc   d836     RCALL     0x163a                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015ce   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015d0   0101     MOVLB     0x1                                                                                             
0015d2   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
0015d4   e201     BC        0x15d8                                                                                          
0015d6   d009     BRA       0x15ea                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015d8   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015da   0b08     ANDLW     0x8                                                                                             
0015dc   e006     BZ        0x15ea                                                                                          
0015de   5069     MOVF      0x69,0x0,0x0                                                                                    
0015e0   0b08     ANDLW     0x8                                                                                             
0015e2   e003     BZ        0x15ea                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * USBCtrlEPService only services transactions over EP0.                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * It ignores all other EP transactions.                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015e4   ec59     CALL      0xeb2,0x0              USBCtrlEPService();                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015e6   f007                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * Other EP can be serviced later by responsible device class firmware.  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * checking the buffer ownership bit.                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    *                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    * of non-EP0 transactions.                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015e8   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015ea   0012     RETURN    0x0            }//end USBDriverService                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSuspend(void)                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void)                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Reason:                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * This is a 1:1 ratio interrupt generation.                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * the number of subsequent bus transitions.                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * [       IDLE       ][bus activity ->                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * <--- 3 ms ----->     ^                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                ^     ACTVIF=1                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                IDLEIF=1                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *  #           #           #           #   (#=Program polling flags)        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          ^                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          This polling loop will see both                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          However, the program services IDLEIF first       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          because ACTIVIE=0.                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          If this routine clears the only ACTIVIF,         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          then it can never get out of the suspend         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          mode.                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015ec   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015ee   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f0   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                       // mode, SIE clock inactive          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * At this point the PIC can go into sleep,idle, or                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * switch to a slower clock, etc.                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /* Modifiable Section */                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f2   9aa1     BCF       0xa1,0x5,0x0       PIR2bits.USBIF = 0;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f4   8aa0     BSF       0xa0,0x5,0x0       PIE2bits.USBIE = 1;                     // Set USB wakeup source             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f6   0003     SLEEP                        Sleep();                                // Goto sleep                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f8   9aa0     BCF       0xa0,0x5,0x0       PIE2bits.USBIE = 0;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /* End Modifiable Section */                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015fa   0012     RETURN    0x0            }//end USBSuspend                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBWakeFromSuspend(void)                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void)                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * If using clock switching, this is the place to restore the                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * original clock frequency.                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015fc   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015fe   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001600   9468     BCF       0x68,0x2,0x0       UIRbits.ACTVIF = 0;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001602   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBRemoteWakeup(void)                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This function should be called by user when the device       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  Please read the note below to understand the limitations.    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            The modifiable section in this routine should be changed     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  to meet the application needs. Current implementation        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  temporary blocks other functions from executing for a        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  period of 1-13 ms depending on the core frequency.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  "The remote wakeup device must hold the resume signaling     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  The idea here is to use a delay counter loop, using a        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  common value that would work over a wide range of core       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  frequencies.                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  That value selected is 1800. See table below:                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                      48              12          1.05                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                       4              1           12.6                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  * These timing could be incorrect when using code            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                    optimization or extended instruction mode,                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                    or when having other interrupts enabled.                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBRemoteWakeup(void)                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               static word delay_count;                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001604   0101     MOVLB     0x1                if(usb_stat.a.RemoteWakeup == 1)          // Check if RemoteWakeup function  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001606   a11f     BTFSS     0x1f,0x0,0x1                                                                                    
001608   d00e     BRA       0x1626                                                                                          
                                               {                                       // has been enabled by the host.     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00160a   dff8     RCALL     0x15fc                 USBWakeFromSuspend();               // Unsuspend USB modue               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00160c   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   /* Modifiable Section */                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00160e   0101     MOVLB     0x1                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001610   0e08     MOVLW     0x8                                                                                             
001612   6f22     MOVWF     0x22,0x1                                                                                        
001614   0e07     MOVLW     0x7                                                                                             
001616   6f23     MOVWF     0x23,0x1                                                                                        
                                                   do                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001618   0722     DECF      0x22,0x1,0x1               delay_count--;                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00161a   0e00     MOVLW     0x0                                                                                             
00161c   5b23     SUBWFB    0x23,0x1,0x1                                                                                    
00161e   5122     MOVF      0x22,0x0,0x1           }while(delay_count);                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001620   1123     IORWF     0x23,0x0,0x1                                                                                    
001622   e1fa     BNZ       0x1618                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   /* End Modifiable Section */                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001624   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }//endif                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001626   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USB_SOF_Handler(void)                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  pipes. End designers should implement callback routine       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  as necessary.                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void)                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001628   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00162a   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBStallHandler(void)                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  packet regardless of which endpoint causes it.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  endpoint stops stalling once it receives a setup packet.     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  In this case, the SIE will accepts the Setup packet and      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  for that particular endpoint pipe will be automatically      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  disabled (direction specific).                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  There are a few reasons for an endpoint to be stalled.       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  1. When a non-supported USB request is received.             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  2. When an endpoint is currently halted.                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  3. When the device class specifies that an endpoint must     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                     stall in response to a specific event.                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                     Example: Mass Storage Device Class                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                              If the CBW is not valid, the device shall        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                              STALL the Bulk-In pipe.                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                              Specification for more details.                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the stall event.                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  If                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void)                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Does not really have to do anything here,                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * even for the control endpoint.                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * but once a Setup Transaction is received, the ownership                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * for EP0_OUT will be returned to CPU.                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * When the Setup Transaction is serviced, the ownership                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00162c   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00162e   d003     BRA       0x1636                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001630   ecbd     CALL      0x117a,0x0             USBPrepareForNextSetupTrf();        // Firmware work-around              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001632   f008                                                                                                               
001634   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001636   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001638   0012     RETURN    0x0            }//end USBStallHandler                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBErrorHandler(void)                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  during development. Check UEIR to see which error causes     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the interrupt.                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void)                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00163a   9268     BCF       0x68,0x1,0x0       UIRbits.UERRIF = 0;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00163c   0012     RETURN    0x0            }//end USBErrorHandler                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00163e   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001640   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001642   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001644   6e6b     MOVWF     0x6b,0x0                                                                                        
001646   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001648   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00164a   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00164c   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00164e   6ee6     MOVWF     0xe6,0x0                                                                                        
001650   0e71     MOVLW     0x71                                                                                            
001652   6ee6     MOVWF     0xe6,0x0                                                                                        
001654   0e0f     MOVLW     0xf                                                                                             
001656   6ee6     MOVWF     0xe6,0x0                                                                                        
001658   d812     RCALL     0x167e                                                                                          
00165a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00165c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00165e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001660   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001662   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001664   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001666   d002     BRA       0x166c                                                                                          
00166a   d7fc     BRA       0x1664                                                                                          
001668   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00166c   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00166e   ecbd     CALL      0x117a,0x0         USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001670   f008                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001672   0101     MOVLB     0x1                usb_stat.a.RemoteWakeup = 0;    // Default status flag to disable            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001674   911f     BCF       0x1f,0x0,0x1                                                                                    
001676   6b20     CLRF      0x20,0x1           usb_active_cfg = 0;             // Clear active configuration                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001678   0e03     MOVLW     0x3                usb_device_state = DEFAULT_STATE;                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00167a   6f1e     MOVWF     0x1e,0x1                                                                                        
00167c   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /* Auxiliary Function */                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00167e   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001680   ffe6                                                                                                               
001682   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001684   ffd9                                                                                                               
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #ifdef HI_TECH_C                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           	byte* pTemp = startAdr;                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           	while(count)                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           	{                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		*pTemp++ = 0;                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #else                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001686   0efd     MOVLW     0xfd           	*startAdr;                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001688   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00168a   ffe9                                                                                                               
00168c   0efe     MOVLW     0xfe                                                                                            
00168e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001690   ffea                                                                                                               
                                           	                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001692   0efc     MOVLW     0xfc           	while(count)                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001694   50db     MOVF      0xdb,0x0,0x0                                                                                    
001696   e004     BZ        0x16a0                                                                                          
00169e   d7f9     BRA       0x1692                                                                                          
                                           	{                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		_asm                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
001698   6aee     CLRF      0xee,0x0       		clrf POSTINC0,0                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		_endasm                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #endif                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00169a   0efc     MOVLW     0xfc           		count--;                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
00169c   06db     DECF      0xdb,0x1,0x0                                                                                    
                                           	}//end while                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0016a0   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
0016a2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0016a4   ffd9                                                                                                               
0016a6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * FileName:        usb9.c                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000bae   0104     MOVLB     0x4                if(SetupPkt.d.RequestType != STANDARD) return;                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000bb0   5120     MOVF      0x20,0x0,0x1                                                                                    
000bb2   0b60     ANDLW     0x60                                                                                            
000bb4   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bb6   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bb8   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bba   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bbc   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bbe   0900     IORLW     0x0                                                                                             
000bc0   e001     BZ        0xbc4                                                                                           
000bc2   d055     BRA       0xc6e                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000bc4   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.b.bRequest)                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000bc6   0a07     XORLW     0x7                                                                                             
000bc8   e051     BZ        0xc6c                                                                                           
000bca   0a0b     XORLW     0xb                                                                                             
000bcc   e04f     BZ        0xc6c                                                                                           
000bce   0a07     XORLW     0x7                                                                                             
000bd0   e040     BZ        0xc52                                                                                           
000bd2   0a01     XORLW     0x1                                                                                             
000bd4   e02c     BZ        0xc2e                                                                                           
000bd6   0a0b     XORLW     0xb                                                                                             
000bd8   e028     BZ        0xc2a                                                                                           
000bda   0a02     XORLW     0x2                                                                                             
000bdc   e026     BZ        0xc2a                                                                                           
000bde   0a03     XORLW     0x3                                                                                             
000be0   e022     BZ        0xc26                                                                                           
000be2   0a08     XORLW     0x8                                                                                             
000be4   e012     BZ        0xc0a                                                                                           
000be6   0a01     XORLW     0x1                                                                                             
000be8   e00e     BZ        0xc06                                                                                           
000bea   0a0f     XORLW     0xf                                                                                             
000bec   e00a     BZ        0xc02                                                                                           
000bee   0a03     XORLW     0x3                                                                                             
000bf0   e001     BZ        0xbf4                                                                                           
000bf2   d03c     BRA       0xc6c                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000bf4   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000bf6   0e01     MOVLW     0x1                                                                                             
000bf8   6f17     MOVWF     0x17,0x1                                                                                        
000bfa   0101     MOVLB     0x1                        usb_device_state = ADR_PENDING_STATE;       // Update state only     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000bfc   0e04     MOVLW     0x4                                                                                             
000bfe   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c00   d036     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c02   d836     RCALL     0xc70                      USBStdGetDscHandler();                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c04   d034     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c06   d890     RCALL     0xd28                      USBStdSetCfgHandler();                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c08   d032     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c0a   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c0c   0e01     MOVLW     0x1                                                                                             
000c0e   6f17     MOVWF     0x17,0x1                                                                                        
000c10   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c12   0e20     MOVLW     0x20                                                                                            
000c14   6f18     MOVWF     0x18,0x1                                                                                        
000c16   0e01     MOVLW     0x1                                                                                             
000c18   6f19     MOVWF     0x19,0x1                                                                                        
000c1a   0101     MOVLB     0x1                        usb_stat.a.ctrl_trf_mem = _RAM;               // Set memory type     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c1c   931f     BCF       0x1f,0x1,0x1                                                                                    
000c1e   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c20   0e01     MOVLW     0x1                                                                                             
000c22   6f1c     MOVWF     0x1c,0x1                                                                                        
000c24   d024     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case GET_STATUS:                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c26   d8a8     RCALL     0xd78                      USBStdGetStatusHandler();                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c28   d022     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case CLR_FEATURE:                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_FEATURE:                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c2a   d8f4     RCALL     0xe14                      USBStdFeatureReqHandler();                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c2c   d020     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case GET_INTF:                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c2e   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c30   0e01     MOVLW     0x1                                                                                             
000c32   6f17     MOVWF     0x17,0x1                                                                                        
000c34   0104     MOVLB     0x4                        pSrc.bRam = (byte*)usb_alt_intf+SetupPkt.h.bIntfID;  // Set source   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c36   5124     MOVF      0x24,0x0,0x1                                                                                    
000c38   0101     MOVLB     0x1                                                                                             
000c3a   6f18     MOVWF     0x18,0x1                                                                                        
000c3c   6b19     CLRF      0x19,0x1                                                                                        
000c3e   0e21     MOVLW     0x21                                                                                            
000c40   2718     ADDWF     0x18,0x1,0x1                                                                                    
000c42   0e01     MOVLW     0x1                                                                                             
000c44   2319     ADDWFC    0x19,0x1,0x1                                                                                    
000c46   0101     MOVLB     0x1                        usb_stat.a.ctrl_trf_mem = _RAM;               // Set memory type     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c48   931f     BCF       0x1f,0x1,0x1                                                                                    
000c4a   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c4c   0e01     MOVLW     0x1                                                                                             
000c4e   6f1c     MOVWF     0x1c,0x1                                                                                        
000c50   d00e     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_INTF:                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c52   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c54   0e01     MOVLW     0x1                                                                                             
000c56   6f17     MOVWF     0x17,0x1                                                                                        
000c58   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.h.bIntfID] = SetupPkt.h.bAltID;                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c5a   5124     MOVF      0x24,0x0,0x1                                                                                    
000c5c   6aea     CLRF      0xea,0x0                                                                                        
000c5e   0f21     ADDLW     0x21                                                                                            
000c60   6ee9     MOVWF     0xe9,0x0                                                                                        
000c62   0e01     MOVLW     0x1                                                                                             
000c64   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000c66   c422     MOVFF     0x422,0xfef                                                                                     
000c68   ffef                                                                                                               
000c6a   d001     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_DSC:                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SYNCH_FRAME:                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   default:                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c6c   d000     BRA       0xc6e                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c6e   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void)                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c70   0e80     MOVLW     0x80               if(SetupPkt.b.bmRequestType == 0x80)                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c72   0104     MOVLB     0x4                                                                                             
000c74   5d20     SUBWF     0x20,0x0,0x1                                                                                    
000c76   e157     BNZ       0xd26                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c78   5123     MOVF      0x23,0x0,0x1           switch(SetupPkt.e.bDscType)                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c7a   0a03     XORLW     0x3                                                                                             
000c7c   e034     BZ        0xce6                                                                                           
000c7e   0a01     XORLW     0x1                                                                                             
000c80   e010     BZ        0xca2                                                                                           
000c82   0a03     XORLW     0x3                                                                                             
000c84   e001     BZ        0xc88                                                                                           
000c86   d04d     BRA       0xd22                                                                                           
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                       case DSC_DEV:                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c88   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c8a   0e01     MOVLW     0x1                                                                                             
000c8c   6f17     MOVWF     0x17,0x1                                                                                        
000c8e   0101     MOVLB     0x1                            pSrc.bRom = (rom byte*)&device_dsc;                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c90   0ea8     MOVLW     0xa8                                                                                            
000c92   6f18     MOVWF     0x18,0x1                                                                                        
000c94   0e16     MOVLW     0x16                                                                                            
000c96   6f19     MOVWF     0x19,0x1                                                                                        
000c98   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000c9a   0101     MOVLB     0x1                                                                                             
000c9c   6f1c     MOVWF     0x1c,0x1                                                                                        
000c9e   6b1d     CLRF      0x1d,0x1                                                                                        
000ca0   d040     BRA       0xd22                          break;                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                       case DSC_CFG:                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000ca2   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000ca4   0e01     MOVLW     0x1                                                                                             
000ca6   6f17     MOVWF     0x17,0x1                                                                                        
000ca8   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.e.bDscIndex);                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000caa   5122     MOVF      0x22,0x0,0x1                                                                                    
000cac   6ef6     MOVWF     0xf6,0x0                                                                                        
000cae   6af7     CLRF      0xf7,0x0                                                                                        
000cb0   90d8     BCF       0xd8,0x0,0x0                                                                                    
000cb2   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000cb4   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000cb6   0e69     MOVLW     0x69                                                                                            
000cb8   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000cba   0e17     MOVLW     0x17                                                                                            
000cbc   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000cbe   0009     TBLRDPOSTINC                                                                                              
000cc0   cff5     MOVFF     0xff5,0x118                                                                                     
000cc2   f118                                                                                                               
000cc4   000a     TBLRDPOSTDEC                                                                                              
000cc6   cff5     MOVFF     0xff5,0x119                                                                                     
000cc8   f119                                                                                                               
000cca   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000ccc   0101     MOVLB     0x1                                                                                             
000cce   6af7     CLRF      0xf7,0x0                                                                                        
000cd0   2518     ADDWF     0x18,0x0,0x1                                                                                    
000cd2   6ef6     MOVWF     0xf6,0x0                                                                                        
000cd4   5119     MOVF      0x19,0x0,0x1                                                                                    
000cd6   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000cd8   0009     TBLRDPOSTINC                                                                                              
000cda   cff5     MOVFF     0xff5,0x11c                                                                                     
000cdc   f11c                                                                                                               
000cde   000a     TBLRDPOSTDEC                                                                                              
000ce0   cff5     MOVFF     0xff5,0x11d                                                                                     
000ce2   f11d                                                                                                               
000ce4   d01e     BRA       0xd22                          break;                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                       case DSC_STR:                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000ce6   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000ce8   0e01     MOVLW     0x1                                                                                             
000cea   6f17     MOVWF     0x17,0x1                                                                                        
000cec   0104     MOVLB     0x4                            pSrc.bRom = *(USB_SD_Ptr+SetupPkt.e.bDscIndex);                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000cee   5122     MOVF      0x22,0x0,0x1                                                                                    
000cf0   6ef6     MOVWF     0xf6,0x0                                                                                        
000cf2   6af7     CLRF      0xf7,0x0                                                                                        
000cf4   90d8     BCF       0xd8,0x0,0x0                                                                                    
000cf6   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000cf8   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000cfa   0e6d     MOVLW     0x6d                                                                                            
000cfc   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000cfe   0e17     MOVLW     0x17                                                                                            
000d00   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000d02   0009     TBLRDPOSTINC                                                                                              
000d04   cff5     MOVFF     0xff5,0x118                                                                                     
000d06   f118                                                                                                               
000d08   000a     TBLRDPOSTDEC                                                                                              
000d0a   cff5     MOVFF     0xff5,0x119                                                                                     
000d0c   f119                                                                                                               
000d0e   c118     MOVFF     0x118,0xff6                    wCount._word = *pSrc.bRom;                  // Set data count    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d10   fff6                                                                                                               
000d12   c119     MOVFF     0x119,0xff7                                                                                     
000d14   fff7                                                                                                               
000d16   0008     TBLRD                                                                                                     
000d18   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000d1a   0101     MOVLB     0x1                                                                                             
000d1c   6f1c     MOVWF     0x1c,0x1                                                                                        
000d1e   6b1d     CLRF      0x1d,0x1                                                                                        
000d20   d000     BRA       0xd22                          break;                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   }//end switch                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d22   0101     MOVLB     0x1                    usb_stat.a.ctrl_trf_mem = _ROM;                       // Set memory type C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d24   831f     BSF       0x1f,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d26   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d28   0101     MOVLB     0x1                ctrl_trf_session_owner = MUID_USB9;                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d2a   0e01     MOVLW     0x1                                                                                             
000d2c   6f17     MOVWF     0x17,0x1                                                                                        
000d2e   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d30   6ee6     MOVWF     0xe6,0x0                                                                                        
000d32   0e71     MOVLW     0x71                                                                                            
000d34   6ee6     MOVWF     0xe6,0x0                                                                                        
000d36   0e0f     MOVLW     0xf                                                                                             
000d38   6ee6     MOVWF     0xe6,0x0                                                                                        
000d3a   ec3f     CALL      0x167e,0x0                                                                                      
000d3c   f00b                                                                                                               
000d3e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d40   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d42   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d44   0e01     MOVLW     0x1                ClearArray((byte*)usb_alt_intf,MAX_NUM_INT);                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d46   6ee6     MOVWF     0xe6,0x0                                                                                        
000d48   0e21     MOVLW     0x21                                                                                            
000d4a   6ee6     MOVWF     0xe6,0x0                                                                                        
000d4c   0e01     MOVLW     0x1                                                                                             
000d4e   6ee6     MOVWF     0xe6,0x0                                                                                        
000d50   ec3f     CALL      0x167e,0x0                                                                                      
000d52   f00b                                                                                                               
000d54   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d56   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d58   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d5a   c422     MOVFF     0x422,0x120        usb_active_cfg = SetupPkt.g.bCfgValue;                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d5c   f120                                                                                                               
000d5e   0104     MOVLB     0x4                if(SetupPkt.g.bCfgValue == 0)                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d60   5122     MOVF      0x22,0x0,0x1                                                                                    
000d62   e104     BNZ       0xd6c                                                                                           
000d64   0101     MOVLB     0x1                    usb_device_state = ADDRESS_STATE;                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d66   0e05     MOVLW     0x5                                                                                             
000d68   6f1e     MOVWF     0x1e,0x1                                                                                        
000d6a   d005     BRA       0xd76              else                                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d6c   0101     MOVLB     0x1                    usb_device_state = CONFIGURED_STATE;                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d6e   0e06     MOVLW     0x6                                                                                             
000d70   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   #if defined(USB_USE_CDC)                // See autofiles\usbcfg.h        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d72   ec7e     CALL      0x8fc,0x0              CDCInitEP();                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d74   f004                                                                                                               
                                                   #endif                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.g.bcfgValue == 0)                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d76   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void)                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d78   0104     MOVLB     0x4                CtrlTrfData.b._byte0 = 0;                         // Initialize content      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d7a   6b28     CLRF      0x28,0x1                                                                                        
000d7c   6b29     CLRF      0x29,0x1           CtrlTrfData.b._byte1 = 0;                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d7e   0104     MOVLB     0x4            	 switch (SetupPkt.d.Recipient)                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d80   5120     MOVF      0x20,0x0,0x1                                                                                    
000d82   0b1f     ANDLW     0x1f                                                                                            
000d84   0a02     XORLW     0x2                                                                                             
000d86   e014     BZ        0xdb0                                                                                           
000d88   0a03     XORLW     0x3                                                                                             
000d8a   e00e     BZ        0xda8                                                                                           
000d8c   0a01     XORLW     0x1                                                                                             
000d8e   e001     BZ        0xd92                                                                                           
000d90   d033     BRA       0xdf8                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case RCPT_DEV:                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d92   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d94   0e01     MOVLW     0x1                                                                                             
000d96   6f17     MOVWF     0x17,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                        */                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                        if(self_power == 1)                     // self_power defined in io_cfg.h C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d98   0104     MOVLB     0x4                            CtrlTrfData.b._byte0|=0b00000001;    // Set bit0                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d9a   8128     BSF       0x28,0x0,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d9c   0101     MOVLB     0x1                        if(usb_stat.a.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000d9e   a11f     BTFSS     0x1f,0x0,0x1                                                                                    
000da0   d002     BRA       0xda6                                                                                           
000da2   0104     MOVLB     0x4                            CtrlTrfData.b._byte0|=0b00000010;     // Set bit1                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000da4   8328     BSF       0x28,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000da6   d028     BRA       0xdf8                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case RCPT_INTF:                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000da8   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000daa   0e01     MOVLW     0x1                                                                                             
000dac   6f17     MOVWF     0x17,0x1                                                                                        
000dae   d024     BRA       0xdf8                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   case RCPT_EP:                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000db0   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000db2   0e01     MOVLW     0x1                                                                                             
000db4   6f17     MOVWF     0x17,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                        */                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000db6   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep[0].out+(SetupPkt.j.EPNum*8)+(SetupPkt.j.EPDir*4); C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000db8   5124     MOVF      0x24,0x0,0x1                                                                                    
000dba   0b0f     ANDLW     0xf                                                                                             
000dbc   0d08     MULLW     0x8                                                                                             
000dbe   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000dc0   6a11     CLRF      0x11,0x0                                                                                        
000dc2   0f00     ADDLW     0x0                                                                                             
000dc4   6e10     MOVWF     0x10,0x0                                                                                        
000dc6   0e04     MOVLW     0x4                                                                                             
000dc8   2211     ADDWFC    0x11,0x1,0x0                                                                                    
000dca   5124     MOVF      0x24,0x0,0x1                                                                                    
000dcc   0b80     ANDLW     0x80                                                                                            
000dce   e001     BZ        0xdd2                                                                                           
000dd0   0e01     MOVLW     0x1                                                                                             
000dd2   0d04     MULLW     0x4                                                                                             
000dd4   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000dd6   0101     MOVLB     0x1                                                                                             
000dd8   2410     ADDWF     0x10,0x0,0x0                                                                                    
000dda   6f1a     MOVWF     0x1a,0x1                                                                                        
000ddc   0e00     MOVLW     0x0                                                                                             
000dde   2011     ADDWFC    0x11,0x0,0x0                                                                                    
000de0   6f1b     MOVWF     0x1b,0x1                                                                                        
                                            				                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000de2   c11a     MOVFF     0x11a,0xfe9                if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000de4   ffe9                                                                                                               
000de6   c11b     MOVFF     0x11b,0xfea                                                                                     
000de8   ffea                                                                                                               
000dea   50ef     MOVF      0xef,0x0,0x0                                                                                    
000dec   0b04     ANDLW     0x4                                                                                             
000dee   e003     BZ        0xdf6                                                                                           
000df0   0104     MOVLB     0x4                            CtrlTrfData.b._byte0=0x01;// Set bit0                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000df2   0e01     MOVLW     0x1                                                                                             
000df4   6f28     MOVWF     0x28,0x1                                                                                        
000df6   d000     BRA       0xdf8                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000df8   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_USB9)                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000dfa   0517     DECF      0x17,0x0,0x1                                                                                    
000dfc   e10a     BNZ       0xe12                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000dfe   0101     MOVLB     0x1                    pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e00   0e28     MOVLW     0x28                                                                                            
000e02   6f18     MOVWF     0x18,0x1                                                                                        
000e04   0e04     MOVLW     0x4                                                                                             
000e06   6f19     MOVWF     0x19,0x1                                                                                        
000e08   0101     MOVLB     0x1                    usb_stat.a.ctrl_trf_mem = _RAM;               // Set memory type         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e0a   931f     BCF       0x1f,0x1,0x1                                                                                    
000e0c   0101     MOVLB     0x1                    LSB(wCount) = 2;                            // Set data count            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e0e   0e02     MOVLW     0x2                                                                                             
000e10   6f1c     MOVWF     0x1c,0x1                                                                                        
                                               }//end if(...)                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e12   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  requests                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void)                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e14   0104     MOVLB     0x4                if((SetupPkt.d.bFeature == DEVICE_REMOTE_WAKEUP)&&                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e16   0522     DECF      0x22,0x0,0x1                                                                                    
000e18   e10f     BNZ       0xe38                 ((SetupPkt.b.bmRequestType & 0x1F) == RCPT_DEV))                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e1a   0e1f     MOVLW     0x1f                                                                                            
000e1c   1520     ANDWF     0x20,0x0,0x1                                                                                    
000e1e   e10c     BNZ       0xe38                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e20   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e22   0e01     MOVLW     0x1                                                                                             
000e24   6f17     MOVWF     0x17,0x1                                                                                        
000e26   0e03     MOVLW     0x3                    if(SetupPkt.b.bRequest == SET_FEATURE)                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e28   0104     MOVLB     0x4                                                                                             
000e2a   5d21     SUBWF     0x21,0x0,0x1                                                                                    
000e2c   e103     BNZ       0xe34                                                                                           
000e2e   0101     MOVLB     0x1                        usb_stat.a.RemoteWakeup = 1;                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e30   811f     BSF       0x1f,0x0,0x1                                                                                    
000e32   d002     BRA       0xe38                  else                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e34   0101     MOVLB     0x1                        usb_stat.a.RemoteWakeup = 0;                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e36   911f     BCF       0x1f,0x0,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e38   0104     MOVLB     0x4                if ((SetupPkt.d.bFeature == ENDPOINT_HALT)&&                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e3a   5122     MOVF      0x22,0x0,0x1                                                                                    
000e3c   e139     BNZ       0xeb0                 ((SetupPkt.b.bmRequestType & 0x1F) == RCPT_EP)&&                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e3e   0e1f     MOVLW     0x1f                                                                                            
000e40   1520     ANDWF     0x20,0x0,0x1                                                                                    
000e42   0802     SUBLW     0x2                                                                                             
000e44   e135     BNZ       0xeb0                                                                                           
000e46   0e0f     MOVLW     0xf                   ((SetupPkt.a._byte[4] & 0x0F) != 0))                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e48   1524     ANDWF     0x24,0x0,0x1                                                                                    
000e4a   e032     BZ        0xeb0                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e4c   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e4e   0e01     MOVLW     0x1                                                                                             
000e50   6f17     MOVWF     0x17,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   /* Must do address calculation here */                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e52   0104     MOVLB     0x4            		  pDst.bRam = (byte*)&ep[0].out+(SetupPkt.j.EPNum*8)+(SetupPkt.j.EPDir*4);     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e54   5124     MOVF      0x24,0x0,0x1                                                                                    
000e56   0b0f     ANDLW     0xf                                                                                             
000e58   0d08     MULLW     0x8                                                                                             
000e5a   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000e5c   6a11     CLRF      0x11,0x0                                                                                        
000e5e   0f00     ADDLW     0x0                                                                                             
000e60   6e10     MOVWF     0x10,0x0                                                                                        
000e62   0e04     MOVLW     0x4                                                                                             
000e64   2211     ADDWFC    0x11,0x1,0x0                                                                                    
000e66   5124     MOVF      0x24,0x0,0x1                                                                                    
000e68   0b80     ANDLW     0x80                                                                                            
000e6a   e001     BZ        0xe6e                                                                                           
000e6c   0e01     MOVLW     0x1                                                                                             
000e6e   0d04     MULLW     0x4                                                                                             
000e70   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000e72   0101     MOVLB     0x1                                                                                             
000e74   2410     ADDWF     0x10,0x0,0x0                                                                                    
000e76   6f1a     MOVWF     0x1a,0x1                                                                                        
000e78   0e00     MOVLW     0x0                                                                                             
000e7a   2011     ADDWFC    0x11,0x0,0x0                                                                                    
000e7c   6f1b     MOVWF     0x1b,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e7e   0e03     MOVLW     0x3                    if(SetupPkt.b.bRequest == SET_FEATURE)                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e80   0104     MOVLB     0x4                                                                                             
000e82   5d21     SUBWF     0x21,0x0,0x1                                                                                    
000e84   e107     BNZ       0xe94                                                                                           
000e86   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e88   c11a     MOVFF     0x11a,0xfe9                                                                                     
000e8a   ffe9                                                                                                               
000e8c   c11b     MOVFF     0x11b,0xfea                                                                                     
000e8e   ffea                                                                                                               
000e90   6eef     MOVWF     0xef,0x0                                                                                        
000e92   d00e     BRA       0xeb0                  else                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e94   af24     BTFSS     0x24,0x7,0x1               if(SetupPkt.j.EPDir == 1) // IN                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e96   d006     BRA       0xea4                                                                                           
000e98   c11a     MOVFF     0x11a,0xfe9                    *pDst.bRam = _UCPU;                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000e9a   ffe9                                                                                                               
000e9c   c11b     MOVFF     0x11b,0xfea                                                                                     
000e9e   ffea                                                                                                               
000ea0   6aef     CLRF      0xef,0x0                                                                                        
000ea2   d006     BRA       0xeb0                      else                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000ea4   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000ea6   c11a     MOVFF     0x11a,0xfe9                                                                                     
000ea8   ffe9                                                                                                               
000eaa   c11b     MOVFF     0x11b,0xfea                                                                                     
000eac   ffea                                                                                                               
000eae   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                               }//end if                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
000eb0   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usb9\usb9.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * FileName:        usbdsc.c                                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * -usbdsc.c-                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * This file contains the USB descriptor information. It is used                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * the user must also change the descriptor structure defined in                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * the usbdsc.h file. The structure is used to calculate the                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * A typical configuration descriptor consists of:                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Naming Convention:                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * To resolve ambiguity, the naming convention are as followed:                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *   configuration number. This number should match the actual                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *   index value of this configuration.                                          C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *   interface number and zz is the alternate interface number.                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *   ## is the endpoint number and d is the direction of transfer.               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *   The interface name should also be listed as a suffix to identify            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *   which interface does the endpoint belong to.                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Example:                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * If a device has one configuration, two interfaces; interface 0                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * #define CFG01 rom struct                            \                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * {   USB_CFG_DSC             cd01;                   \                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i00a00;                 \                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i01a00;                 \                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * } cfg01                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * specification requirement. All endpoints belonging to an interface            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * should be listed immediately after that interface.                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Most items should be self-explanatory, however, a few will be                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * explained for clarification.                                                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The configuration attribute must always have the _DEFAULT                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * definition at the minimum. Additional options can be ORed                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * _SELF tells the USB host that this device is self-powered. The                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Assume the following example:                                                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The first two parameters are self-explanatory. They specify the               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The next parameter identifies the endpoint, the definitions are               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * convention:                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * _EP<##>_<dir>                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * where ## is the endpoint number and dir is the direction of                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The next parameter identifies the type of the endpoint. Available             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * typically used because the default control transfer endpoint is               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * addition options can be ORed to _ISO. Example:                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * _ISO|_AD|_FE                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * specification for details. The next parameter defines the size of             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * the endpoint. The last parameter in the polling interval.                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Adding a USB String                                                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * A string descriptor array should have the following format:                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The above structure provides a means for the C compiler to                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * index number. The first two bytes of the descriptor are descriptor            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * length and type. The rest <text> are string texts which must be               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * in the unicode format. The unicode format is achieved by declaring            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * each character as a word type. The whole text string is declared              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * as a word array with the number of characters equals to <size>.               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * <size> has to be manually counted and entered into the array                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * declaration. Let's study this through an example:                             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * if the string is "USB" , then the string descriptor should be:                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * (Using index 02)                                                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * A USB project may have multiple strings and the firmware supports             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * the management of multiple strings through a look-up table.                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The look-up table is defined as:                                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Strings can be removed or added. sd000 is a specialized string                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * descriptor. It defines the language code, usually this is                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * US English (0x0409). The index of the string must match the index             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * function in usb9.c.                                                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The look-up table scheme also applies to the configuration                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * descriptor. A USB device may have multiple configuration                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * descriptor, user must implement a structure similar to CFG01.                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * The next step is to add the configuration descriptor name, i.e.               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * is a dummy place holder since configuration 0 is the un-configured            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * state according to the definition in the USB specification.                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Descriptor specific type definitions are defined in:                          C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * Configuration information is defined in:                                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            * autofiles\usbcfg.h                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           /** I N C L U D E S *************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           #ifndef HI_TECH_C                                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           #pragma romdata                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           #endif                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           /* Device Descriptor */                                                          C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x0200,                 // USB Spec Release Number in BCD format             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               CDC_DEVICE,             // Class Code                                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               EP0_BUFF_SIZE,          // Max packet size for EP0, see usbcfg.h             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x04D8,                 // Vendor ID                                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x000A,                 // Product ID: CDC RS-232 Emulation Demo             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x0000,                 // Device release number in BCD format               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x01,                   // Manufacturer string index                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x02,                   // Product string index                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x00,                   // Device serial number string index                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0x01                    // Number of possible configurations                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           /*                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           // Configuration 1 Descriptor                                                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           typedef struct                            	                                      C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           {   USB_CFG_DSC             cd01;                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_INTF_DSC            i01a00;                                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_CDC_HEADER_FN_DSC   cdc_header_fn_i01a00;                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_CDC_ACM_FN_DSC      cdc_acm_fn_i01a00;                                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_CDC_UNION_FN_DSC    cdc_union_fn_i01a00;                                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_CDC_CALL_MGT_FN_DSC cdc_call_mgt_fn_i01a00;                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_EP_DSC              ep02i_i01a00;                                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_INTF_DSC            i02a00;                                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_EP_DSC              ep03o_i02a00;                                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USB_EP_DSC              ep03i_i02a00;                                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           } CFG01;                                                                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           */                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           rom CFG01 cfg01 =                                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               /* Configuration Descriptor */                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               2,                      // Number of interfaces in this cfg                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               1,                      // Index value of this configuration                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Configuration string index                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                 C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               50,                     // Max power consumption (2X mA)                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Interface Number                                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               1,                      // Number of endpoints in this intf                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               COMM_INTF,              // Class code                                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               ABSTRACT_CONTROL_MODEL, // Subclass code                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               V25TER,                 // Protocol code                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               /* CDC Class-Specific Descriptors */                                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CDC_HEADER_FN_DSC),CS_INTERFACE,DSC_FN_HEADER,0x0110,             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CDC_ACM_FN_DSC),CS_INTERFACE,DSC_FN_ACM,0x02,                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CDC_UNION_FN_DSC),CS_INTERFACE,DSC_FN_UNION,CDC_COMM_INTF_ID,CDC_DATA_INTF_ID, C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CDC_CALL_MGT_FN_DSC),CS_INTERFACE,DSC_FN_CALL_MGT,0x00,CDC_DATA_INTF_ID, C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               /* Endpoint Descriptor */                                                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP02_IN,_INT,CDC_INT_EP_SIZE,0x02,                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               1,                      // Interface Number                                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               2,                      // Number of endpoints in this intf                  C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               DATA_INTF,              // Class code                                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Subclass code                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               NO_PROTOCOL,            // Protocol code                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               /* Endpoint Descriptors */                                                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP03_OUT,_BULK,CDC_BULK_OUT_EP_SIZE,0x00,         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP03_IN,_BULK,CDC_BULK_IN_EP_SIZE,0x00            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd001={                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           sizeof(sd001),DSC_STR,                                                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           'M','i','c','r','o','c','h','i','p',' ',                                         C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           'T','e','c','h','n','o','l','o','g','y',' ','I','n','c','.'};                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd002={                   C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           sizeof(sd002),DSC_STR,                                                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           'C','D','C',' ','R','S','-','2','3','2',' ',                                     C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           'E','m','u','l','a','t','i','o','n',' ','D','e','m','o'};                        C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           const_rom unsigned char *rom USB_CD_Ptr[]=                                       C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           	(const_rom unsigned char *) &cfg01,                                             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           	(const_rom unsigned char *) &cfg01                                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           const_rom unsigned char *rom USB_SD_Ptr[]=                                       C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           	(const_rom unsigned char *) &sd000,                                             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           	(const_rom unsigned char *) &sd001,                                             C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           	(const_rom unsigned char *) &sd002                                              C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           rom pFunc ClassReqHandler[1]=                                                    C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                               USBCheckCDCRequest                                                           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           /** EOF usbdsc.c ****************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPService(void)                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000eb2   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000eb4   e002     BZ        0xeba                                                                                           
000eb6   0e00     MOVLW     0x0                                                                                             
000eb8   d001     BRA       0xebc                                                                                           
000eba   0e01     MOVLW     0x1                                                                                             
000ebc   0900     IORLW     0x0                                                                                             
000ebe   e00b     BZ        0xed6                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ec0   0104     MOVLB     0x4                    if(ep[0].out.a.Stat.c.PID == SETUP_TOKEN)       // EP0 SETUP             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ec2   5100     MOVF      0x0,0x0,0x1                                                                                     
000ec4   0b3c     ANDLW     0x3c                                                                                            
000ec6   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000ec8   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000eca   080d     SUBLW     0xd                                                                                             
000ecc   e102     BNZ       0xed2                                                                                           
000ece   d80c     RCALL     0xee8                      USBCtrlTrfSetupHandler();                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ed0   d001     BRA       0xed4                  else                                        // EP0 OUT                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ed2   d840     RCALL     0xf54                      USBCtrlTrfOutHandler();                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ed4   d008     BRA       0xee6              else if(USTAT == EP00_IN)                       // EP0 IN                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ed6   506c     MOVF      0x6c,0x0,0x0                                                                                    
000ed8   e002     BZ        0xede                                                                                           
000eda   0e00     MOVLW     0x0                                                                                             
000edc   d001     BRA       0xee0                                                                                           
000ede   0e01     MOVLW     0x1                                                                                             
000ee0   0904     IORLW     0x4                                                                                             
000ee2   e001     BZ        0xee6                                                                                           
000ee4   d847     RCALL     0xf74                  USBCtrlTrfInHandler();                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ee6   0012     RETURN    0x0            }//end USBCtrlEPService                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ee8   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000eea   ffe6                                                                                                               
000eec   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000eee   ffd9                                                                                                               
000ef0   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ef2   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ef4   6b16     CLRF      0x16,0x1                                                                                        
000ef6   6b17     CLRF      0x17,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ef8   6b1c     CLRF      0x1c,0x1           wCount._word = 0;                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000efa   6b1d     CLRF      0x1d,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000efc   ecd7     CALL      0xbae,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000efe   f005                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f00   6adf     CLRF      0xdf,0x0           for(i=0;i < (sizeof(ClassReqHandler)/sizeof(pFunc));i++)                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f02   50df     MOVF      0xdf,0x0,0x0                                                                                    
000f04   6e10     MOVWF     0x10,0x0                                                                                        
000f06   6a11     CLRF      0x11,0x0                                                                                        
000f08   0e01     MOVLW     0x1                                                                                             
000f0a   5c10     SUBWF     0x10,0x0,0x0                                                                                    
000f0c   0e00     MOVLW     0x0                                                                                             
000f0e   5811     SUBWFB    0x11,0x0,0x0                                                                                    
000f10   e21b     BC        0xf48                                                                                           
000f44   2adf     INCF      0xdf,0x1,0x0                                                                                    
000f46   d7dd     BRA       0xf02                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f12   0101     MOVLB     0x1                    if(ctrl_trf_session_owner != MUID_NULL)break;                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f14   5117     MOVF      0x17,0x0,0x1                                                                                    
000f16   e001     BZ        0xf1a                                                                                           
000f18   d017     BRA       0xf48                                                                                           
000f1a   6af7     CLRF      0xf7,0x0               ClassReqHandler[i]();               // See autofiles\usbdsc.c            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f1c   34df     RLCF      0xdf,0x0,0x0                                                                                    
000f1e   0bfe     ANDLW     0xfe                                                                                            
000f20   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000f22   6ef6     MOVWF     0xf6,0x0                                                                                        
000f24   0e73     MOVLW     0x73                                                                                            
000f26   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000f28   0e17     MOVLW     0x17                                                                                            
000f2a   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000f2c   0009     TBLRDPOSTINC                                                                                              
000f2e   cff5     MOVFF     0xff5,0x10                                                                                      
000f30   f010                                                                                                               
000f32   0008     TBLRD                                                                                                     
000f34   cff5     MOVFF     0xff5,0x11                                                                                      
000f36   f011                                                                                                               
000f38   d004     BRA       0xf42                                                                                           
000f3a   c011     MOVFF     0x11,0xffa                                                                                      
000f3c   fffa                                                                                                               
000f3e   5010     MOVF      0x10,0x0,0x0                                                                                    
000f40   6ef9     MOVWF     0xf9,0x0                                                                                        
000f42   dffb     RCALL     0xf3a                                                                                           
                                               }//end while                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f48   d8d5     RCALL     0x10f4             USBCtrlEPServiceComplete();                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f4a   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f4c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f4e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000f50   ffd9                                                                                                               
000f52   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f54   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f56   0101     MOVLB     0x1                                                                                             
000f58   5d16     SUBWF     0x16,0x0,0x1                                                                                    
000f5a   e10a     BNZ       0xf70                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f5c   d892     RCALL     0x1082                 USBCtrlTrfRxService();                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f5e   0104     MOVLB     0x4                    if(ep[0].out.a.Stat.a.DTS == 0)                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f60   bd00     BTFSC     0x0,0x6,0x1                                                                                     
000f62   d003     BRA       0xf6a                                                                                           
000f64   0ec8     MOVLW     0xc8                       ep[0].out.a.Stat._byte = _USIE|_DAT1|_DTSEN;                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f66   6f00     MOVWF     0x0,0x1                                                                                         
000f68   d002     BRA       0xf6e                  else                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f6a   0e88     MOVLW     0x88                       ep[0].out.a.Stat._byte = _USIE|_DAT0|_DTSEN;                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f6c   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f6e   d001     BRA       0xf72              else    // CTRL_TRF_TX                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f70   d904     RCALL     0x117a                 USBPrepareForNextSetupTrf();                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f72   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f74   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f76   0101     MOVLB     0x1                                                                                             
000f78   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
000f7a   e10a     BNZ       0xf90                                                                                           
000f7c   c422     MOVFF     0x422,0xf6e                                                                                     
000f7e   ff6e                                                                                                               
000f80   506e     MOVF      0x6e,0x0,0x0                                                                                    
000f82   0800     SUBLW     0x0                                                                                             
000f84   e203     BC        0xf8c                                                                                           
000f86   0e05     MOVLW     0x5                                                                                             
000f88   6f1e     MOVWF     0x1e,0x1                                                                                        
000f8a   d002     BRA       0xf90                                                                                           
000f8c   0e03     MOVLW     0x3                                                                                             
000f8e   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f90   0101     MOVLB     0x1                if(ctrl_trf_state == CTRL_TRF_TX)                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f92   0516     DECF      0x16,0x0,0x1                                                                                    
000f94   e10a     BNZ       0xfaa                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f96   d80b     RCALL     0xfae                  USBCtrlTrfTxService();                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f98   0104     MOVLB     0x4                    if(ep[0].in.a.Stat.a.DTS == 0)                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000f9a   bd04     BTFSC     0x4,0x6,0x1                                                                                     
000f9c   d003     BRA       0xfa4                                                                                           
000f9e   0ec8     MOVLW     0xc8                       ep[0].in.a.Stat._byte = _USIE|_DAT1|_DTSEN;                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fa0   6f04     MOVWF     0x4,0x1                                                                                         
000fa2   d002     BRA       0xfa8                  else                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fa4   0e88     MOVLW     0x88                       ep[0].in.a.Stat._byte = _USIE|_DAT0|_DTSEN;                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fa6   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fa8   d001     BRA       0xfac              else // CTRL_TRF_RX                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000faa   d8e7     RCALL     0x117a                 USBPrepareForNextSetupTrf();                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fac   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fae   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fb0   ffe6                                                                                                               
000fb2   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000fb4   ffd9                                                                                                               
000fb6   0e02     MOVLW     0x2                                                                                             
000fb8   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_send;                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fba   0101     MOVLB     0x1                if(wCount._word < EP0_BUFF_SIZE)                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fbc   0e08     MOVLW     0x8                                                                                             
000fbe   5d1c     SUBWF     0x1c,0x0,0x1                                                                                    
000fc0   0e00     MOVLW     0x0                                                                                             
000fc2   591d     SUBWFB    0x1d,0x0,0x1                                                                                    
000fc4   e205     BC        0xfd0                                                                                           
000fc6   c11c     MOVFF     0x11c,0xfde            byte_to_send._word = wCount._word;                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fc8   ffde                                                                                                               
000fca   c11d     MOVFF     0x11d,0xfdd                                                                                     
000fcc   ffdd                                                                                                               
000fce   d003     BRA       0xfd6              else                                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fd0   0e08     MOVLW     0x8                    byte_to_send._word = EP0_BUFF_SIZE;                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fd2   6ede     MOVWF     0xde,0x0                                                                                        
000fd4   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fd6   0104     MOVLB     0x4                ep[0].in.a.Stat.a.BC9 = 0;                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fd8   9304     BCF       0x4,0x1,0x1                                                                                     
000fda   9104     BCF       0x4,0x0,0x1        ep[0].in.a.Stat.a.BC8 = 0;                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fdc   0e01     MOVLW     0x1                ep[0].in.a.Stat._byte |= MSB(byte_to_send);                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fde   50db     MOVF      0xdb,0x0,0x0                                                                                    
000fe0   1304     IORWF     0x4,0x1,0x1                                                                                     
000fe2   cfdf     MOVFF     0xfdf,0x405        ep[0].in._byte[1] = LSB(byte_to_send);                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fe4   f405                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fe6   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000fe8   50db     MOVF      0xdb,0x0,0x0                                                                                    
000fea   0101     MOVLB     0x1                                                                                             
000fec   5f1c     SUBWF     0x1c,0x1,0x1                                                                                    
000fee   0e01     MOVLW     0x1                                                                                             
000ff0   50db     MOVF      0xdb,0x0,0x0                                                                                    
000ff2   5b1d     SUBWFB    0x1d,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ff4   0e28     MOVLW     0x28               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ff6   6f1a     MOVWF     0x1a,0x1                                                                                        
000ff8   0e04     MOVLW     0x4                                                                                             
000ffa   6f1b     MOVWF     0x1b,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ffc   0101     MOVLB     0x1                if(usb_stat.a.ctrl_trf_mem == _ROM)       // Determine type of memory source C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ffe   a31f     BTFSS     0x1f,0x1,0x1                                                                                    
001000   d01e     BRA       0x103e                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001002   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001004   ffe9                                                                                                               
001006   cfda     MOVFF     0xfda,0xfea                                                                                     
001008   ffea                                                                                                               
00100a   50ee     MOVF      0xee,0x0,0x0                                                                                    
00100c   10ed     IORWF     0xed,0x0,0x0                                                                                    
00100e   e016     BZ        0x103c                                                                                          
00103a   d7e3     BRA       0x1002                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001010   c118     MOVFF     0x118,0xff6                *pDst.bRam = *pSrc.bRom;                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001012   fff6                                                                                                               
001014   c119     MOVFF     0x119,0xff7                                                                                     
001016   fff7                                                                                                               
001018   0008     TBLRD                                                                                                     
00101a   50f5     MOVF      0xf5,0x0,0x0                                                                                    
00101c   c11a     MOVFF     0x11a,0xfe9                                                                                     
00101e   ffe9                                                                                                               
001020   c11b     MOVFF     0x11b,0xfea                                                                                     
001022   ffea                                                                                                               
001024   6eef     MOVWF     0xef,0x0                                                                                        
001026   0101     MOVLB     0x1                        pDst.bRam++;                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001028   2b1a     INCF      0x1a,0x1,0x1                                                                                    
00102a   0e00     MOVLW     0x0                                                                                             
00102c   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
00102e   2b18     INCF      0x18,0x1,0x1               pSrc.bRom++;                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001030   2319     ADDWFC    0x19,0x1,0x1                                                                                    
001032   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001034   0e01     MOVLW     0x1                                                                                             
001036   e201     BC        0x103a                                                                                          
001038   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00103c   d01c     BRA       0x1076             else // RAM                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00103e   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001040   ffe9                                                                                                               
001042   cfda     MOVFF     0xfda,0xfea                                                                                     
001044   ffea                                                                                                               
001046   50ee     MOVF      0xee,0x0,0x0                                                                                    
001048   10ed     IORWF     0xed,0x0,0x0                                                                                    
00104a   e015     BZ        0x1076                                                                                          
001074   d7e4     BRA       0x103e                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00104c   c118     MOVFF     0x118,0xfe9                *pDst.bRam = *pSrc.bRam;                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00104e   ffe9                                                                                                               
001050   c119     MOVFF     0x119,0xfea                                                                                     
001052   ffea                                                                                                               
001054   50ef     MOVF      0xef,0x0,0x0                                                                                    
001056   c11a     MOVFF     0x11a,0xfe9                                                                                     
001058   ffe9                                                                                                               
00105a   c11b     MOVFF     0x11b,0xfea                                                                                     
00105c   ffea                                                                                                               
00105e   6eef     MOVWF     0xef,0x0                                                                                        
001060   0101     MOVLB     0x1                        pDst.bRam++;                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001062   2b1a     INCF      0x1a,0x1,0x1                                                                                    
001064   0e00     MOVLW     0x0                                                                                             
001066   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
001068   2b18     INCF      0x18,0x1,0x1               pSrc.bRam++;                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00106a   2319     ADDWFC    0x19,0x1,0x1                                                                                    
00106c   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00106e   0e01     MOVLW     0x1                                                                                             
001070   e201     BC        0x1074                                                                                          
001072   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(usb_stat.a.ctrl_trf_mem == _ROM)                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001076   cfd9     MOVFF     0xfd9,0xfe1    }//end USBCtrlTrfTxService                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001078   ffe1                                                                                                               
00107a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00107c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00107e   ffd9                                                                                                               
001080   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.a.ctrl_trf_mem is always _RAM.                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001082   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001084   ffe6                                                                                                               
001086   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001088   ffd9                                                                                                               
00108a   0e02     MOVLW     0x2                                                                                             
00108c   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_read;                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00108e   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep[0].out.a.Stat._byte;    // Filter out last 2 bits C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001090   0104     MOVLB     0x4                                                                                             
001092   1500     ANDWF     0x0,0x0,0x1                                                                                     
001094   6ee7     MOVWF     0xe7,0x0                                                                                        
001096   0e01     MOVLW     0x1                                                                                             
001098   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00109a   ffdb                                                                                                               
00109c   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep[0].out.a.Cnt;                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00109e   ffdf                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010a0   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010a2   0101     MOVLB     0x1                                                                                             
0010a4   271c     ADDWF     0x1c,0x1,0x1                                                                                    
0010a6   50dd     MOVF      0xdd,0x0,0x0                                                                                    
0010a8   231d     ADDWFC    0x1d,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010aa   0e28     MOVLW     0x28               pSrc.bRam = (byte*)&CtrlTrfData;                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010ac   6f18     MOVWF     0x18,0x1                                                                                        
0010ae   0e04     MOVLW     0x4                                                                                             
0010b0   6f19     MOVWF     0x19,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010b2   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010b4   ffe9                                                                                                               
0010b6   cfda     MOVFF     0xfda,0xfea                                                                                     
0010b8   ffea                                                                                                               
0010ba   50ee     MOVF      0xee,0x0,0x0                                                                                    
0010bc   10ed     IORWF     0xed,0x0,0x0                                                                                    
0010be   e014     BZ        0x10e8                                                                                          
0010e6   d7e5     BRA       0x10b2                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010c0   c118     MOVFF     0x118,0xfe9            *pDst.bRam = *pSrc.bRam;                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010c2   ffe9                                                                                                               
0010c4   c119     MOVFF     0x119,0xfea                                                                                     
0010c6   ffea                                                                                                               
0010c8   50ef     MOVF      0xef,0x0,0x0                                                                                    
0010ca   c11a     MOVFF     0x11a,0xfe9                                                                                     
0010cc   ffe9                                                                                                               
0010ce   c11b     MOVFF     0x11b,0xfea                                                                                     
0010d0   ffea                                                                                                               
0010d2   6eef     MOVWF     0xef,0x0                                                                                        
0010d4   2b1a     INCF      0x1a,0x1,0x1           pDst.bRam++;                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010d6   0e00     MOVLW     0x0                                                                                             
0010d8   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
0010da   2b18     INCF      0x18,0x1,0x1           pSrc.bRam++;                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010dc   2319     ADDWFC    0x19,0x1,0x1                                                                                    
0010de   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010e0   0e01     MOVLW     0x1                                                                                             
0010e2   e201     BC        0x10e6                                                                                          
0010e4   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010e8   cfd9     MOVFF     0xfd9,0xfe1    }//end USBCtrlTrfRxService                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010ea   ffe1                                                                                                               
0010ec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010ee   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0010f0   ffd9                                                                                                               
0010f2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010f4   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_NULL)                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010f6   5117     MOVF      0x17,0x0,0x1                                                                                    
0010f8   e10b     BNZ       0x1110                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010fa   0104     MOVLB     0x4                    ep[0].out.a.Cnt = EP0_BUFF_SIZE;                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0010fc   0e08     MOVLW     0x8                                                                                             
0010fe   6f01     MOVWF     0x1,0x1                                                                                         
001100   0e20     MOVLW     0x20                   ep[0].out.b.ADR = (byte*)&SetupPkt;                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001102   6f02     MOVWF     0x2,0x1                                                                                         
001104   0e04     MOVLW     0x4                                                                                             
001106   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001108   0e84     MOVLW     0x84                   ep[0].out.a.Stat._byte = _USIE|_BSTALL;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00110a   6f00     MOVWF     0x0,0x1                                                                                         
00110c   6f04     MOVWF     0x4,0x1                ep[0].in.a.Stat._byte = _USIE|_BSTALL;                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00110e   d033     BRA       0x1176             else    // A module has claimed ownership of the control transfer session.   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001110   0104     MOVLB     0x4                    if(SetupPkt.d.DataDir == DEV_TO_HOST)                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001112   af20     BTFSS     0x20,0x7,0x1                                                                                    
001114   d021     BRA       0x1158                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001116   0101     MOVLB     0x1                        if(SetupPkt.b.wLength < wCount._word)                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001118   511c     MOVF      0x1c,0x0,0x1                                                                                    
00111a   0104     MOVLB     0x4                                                                                             
00111c   5d26     SUBWF     0x26,0x0,0x1                                                                                    
00111e   0101     MOVLB     0x1                                                                                             
001120   511d     MOVF      0x1d,0x0,0x1                                                                                    
001122   0104     MOVLB     0x4                                                                                             
001124   5927     SUBWFB    0x27,0x0,0x1                                                                                    
001126   e204     BC        0x1130                                                                                          
001128   c426     MOVFF     0x426,0x11c                    wCount._word = SetupPkt.b.wLength;                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00112a   f11c                                                                                                               
00112c   c427     MOVFF     0x427,0x11d                                                                                     
00112e   f11d                                                                                                               
001130   df3e     RCALL     0xfae                      USBCtrlTrfTxService();                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001132   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_TX;                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001134   0e01     MOVLW     0x1                                                                                             
001136   6f16     MOVWF     0x16,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001138   0104     MOVLB     0x4                        ep[0].out.a.Cnt = EP0_BUFF_SIZE;                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00113a   0e08     MOVLW     0x8                                                                                             
00113c   6f01     MOVWF     0x1,0x1                                                                                         
00113e   0e20     MOVLW     0x20                       ep[0].out.b.ADR = (byte*)&SetupPkt;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001140   6f02     MOVWF     0x2,0x1                                                                                         
001142   0e04     MOVLW     0x4                                                                                             
001144   6f03     MOVWF     0x3,0x1                                                                                         
001146   0e80     MOVLW     0x80                       ep[0].out.a.Stat._byte = _USIE;           // Note: DTSEN is 0!       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001148   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00114a   0e28     MOVLW     0x28                       ep[0].in.b.ADR = (byte*)&CtrlTrfData;                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00114c   6f06     MOVWF     0x6,0x1                                                                                         
00114e   0e04     MOVLW     0x4                                                                                             
001150   6f07     MOVWF     0x7,0x1                                                                                         
001152   0ec8     MOVLW     0xc8                       ep[0].in.a.Stat._byte = _USIE|_DAT1|_DTSEN;                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001154   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001156   d00f     BRA       0x1176                 else    // (SetupPkt.d.DataDir == HOST_TO_DEV)                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001158   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_RX;                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00115a   0e02     MOVLW     0x2                                                                                             
00115c   6f16     MOVWF     0x16,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00115e   0104     MOVLB     0x4                        ep[0].in.a.Cnt = 0;                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001160   6b05     CLRF      0x5,0x1                                                                                         
001162   0ec8     MOVLW     0xc8                       ep[0].in.a.Stat._byte = _USIE|_DAT1|_DTSEN;                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001164   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001166   0e08     MOVLW     0x8                        ep[0].out.a.Cnt = EP0_BUFF_SIZE;                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001168   6f01     MOVWF     0x1,0x1                                                                                         
00116a   0e28     MOVLW     0x28                       ep[0].out.b.ADR = (byte*)&CtrlTrfData;                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00116c   6f02     MOVWF     0x2,0x1                                                                                         
00116e   0e04     MOVLW     0x4                                                                                             
001170   6f03     MOVWF     0x3,0x1                                                                                         
001172   0ec8     MOVLW     0xc8                       ep[0].out.a.Stat._byte = _USIE|_DAT1|_DTSEN;                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001174   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.d.DataDir == DEV_TO_HOST)                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001176   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001178   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBPrepareForNextSetupTrf(void)                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00117a   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00117c   6b16     CLRF      0x16,0x1                                                                                        
00117e   0104     MOVLB     0x4                ep[0].out.a.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001180   0e08     MOVLW     0x8                                                                                             
001182   6f01     MOVWF     0x1,0x1                                                                                         
001184   0e20     MOVLW     0x20               ep[0].out.b.ADR = (byte*)&SetupPkt;                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001186   6f02     MOVWF     0x2,0x1                                                                                         
001188   0e04     MOVLW     0x4                                                                                             
00118a   6f03     MOVWF     0x3,0x1                                                                                         
00118c   0e88     MOVLW     0x88               ep[0].out.a.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00118e   6f00     MOVWF     0x0,0x1                                                                                         
001190   6b04     CLRF      0x4,0x1            ep[0].in.a.Stat._byte = _UCPU;               // EP0 IN buffer initialization C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
001192   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * FileName:        user.c                                                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * CDC RS-232 Emulation Tutorial Instructions:                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            ******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Refer to Application Note AN956 for explanation of the CDC class.             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * First take a look at Exercise_Example() and study how functions are called.   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * There are five exercises, each one has a solution in the CDC\user\solutions.  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Scroll down and look for Exercise_01,_02,_03,_04, and _05.                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Instructions on what to do is inside each function.                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           #include <usart.h>                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           #include "io_cfg.h"             // I/O pin mapping                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           #include "user\user.h"                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           #include "user\temperature.h"                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           byte old_sw2,old_sw3;                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           char input_buffer[64];                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           char output_buffer[64];                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           rom char welcome[]={"PIC18F4550 Full-Speed USB - CDC RS-232 Emulation Demo\r\n\r\n"}; C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           rom char ansi_clrscr[]={"\x1b[2J"};         // ANSI Clear Screen Command         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void InitializeUSART(void);                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void BlinkUSBStatus(void);                                                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           BOOL Switch2IsPressed(void);                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           BOOL Switch3IsPressed(void);                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_Example(void);                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_01(void);                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_02(void);                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_03(void);                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_04(void);                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_05(void);                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void UserInit(void)                                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001194   0ef0     MOVLW     0xf0               mInitAllLEDs();                                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001196   168c     ANDWF     0x8c,0x1,0x0                                                                                    
001198   1695     ANDWF     0x95,0x1,0x0                                                                                    
00119a   8893     BSF       0x93,0x4,0x0       mInitAllSwitches();                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00119c   8a93     BSF       0x93,0x5,0x0                                                                                    
00119e   5081     MOVF      0x81,0x0,0x0       old_sw2 = sw2;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011a0   0b10     ANDLW     0x10                                                                                            
0011a2   e001     BZ        0x11a6                                                                                          
0011a4   0e01     MOVLW     0x1                                                                                             
0011a6   0100     MOVLB     0x0                                                                                             
0011a8   6f60     MOVWF     0x60,0x1                                                                                        
0011aa   5081     MOVF      0x81,0x0,0x0       old_sw3 = sw3;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011ac   0b20     ANDLW     0x20                                                                                            
0011ae   e001     BZ        0x11b2                                                                                          
0011b0   0e01     MOVLW     0x1                                                                                             
0011b2   6f61     MOVWF     0x61,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011b4   eccd     CALL      0x139a,0x0         InitTempSensor();                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011b6   f009                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011b8   efde     GOTO      0x11bc             InitializeUSART();                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011ba   f008                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           }//end UserInit                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void InitializeUSART(void)                                                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011bc   8e94     BSF       0x94,0x7,0x0       TRISCbits.TRISC7=1; // RX                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011be   9c94     BCF       0x94,0x6,0x0       TRISCbits.TRISC6=0; // TX                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011c0   0e71     MOVLW     0x71               SPBRG = 0x71;                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011c2   6eaf     MOVWF     0xaf,0x0                                                                                        
0011c4   0e02     MOVLW     0x2                SPBRGH = 0x02;      // 0x0271 for 48MHz -> 19200 baud                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011c6   6eb0     MOVWF     0xb0,0x0                                                                                        
0011c8   0e24     MOVLW     0x24               TXSTA = 0x24;       // TX enable BRGH=1                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011ca   6eac     MOVWF     0xac,0x0                                                                                        
0011cc   0e90     MOVLW     0x90               RCSTA = 0x90;       // continuous RX                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011ce   6eab     MOVWF     0xab,0x0                                                                                        
0011d0   0e08     MOVLW     0x8                BAUDCON = 0x08;     // BRG16 = 1                                             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011d2   6eb8     MOVWF     0xb8,0x0                                                                                        
0011d4   0012     RETURN    0x0            }//end InitializeUSART                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Function:        void ProcessIO(void)                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Overview:        This function is a place holder for other user routines.     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                  It is a mixture of both USB and non-USB tasks.               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void ProcessIO(void)                                                             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011d6   d873     RCALL     0x12be             BlinkUSBStatus();                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               // User Application USB tasks                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011d8   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011da   0101     MOVLB     0x1                                                                                             
0011dc   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
0011de   e303     BNC       0x11e6                                                                                          
0011e0   506d     MOVF      0x6d,0x0,0x0                                                                                    
0011e2   0b02     ANDLW     0x2                                                                                             
0011e4   e001     BZ        0x11e8                                                                                          
0011e6   d006     BRA       0x11f4                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011e8   d806     RCALL     0x11f6             Exercise_Example();                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011ea   d840     RCALL     0x126c             Exercise_01();                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011ec   d84b     RCALL     0x1284             Exercise_02();                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011ee   d84b     RCALL     0x1286             Exercise_03();                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011f0   d84b     RCALL     0x1288             Exercise_04();                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011f2   d84b     RCALL     0x128a             Exercise_05();                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011f4   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_Example(void)                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               static byte start_up_state = 0;                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011f6   0101     MOVLB     0x1                if(start_up_state == 0)                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011f8   5124     MOVF      0x24,0x0,0x1                                                                                    
0011fa   e106     BNZ       0x1208                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011fc   d8a8     RCALL     0x134e                 if(Switch2IsPressed())                                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0011fe   0900     IORLW     0x0                                                                                             
001200   e002     BZ        0x1206                                                                                          
001202   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001204   2b24     INCF      0x24,0x1,0x1                                                                                    
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001206   d031     BRA       0x126a             else if(start_up_state == 1)                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001208   0524     DECF      0x24,0x0,0x1                                                                                    
00120a   e10e     BNZ       0x1228                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00120c   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00120e   51e5     MOVF      0xe5,0x0,0x1                                                                                    
001210   e10a     BNZ       0x1226                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001212   0eb4     MOVLW     0xb4                       putrsUSBUSART(ansi_clrscr);                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001214   6ee6     MOVWF     0xe6,0x0                                                                                        
001216   0e18     MOVLW     0x18                                                                                            
001218   6ee6     MOVWF     0xe6,0x0                                                                                        
00121a   ec21     CALL      0xa42,0x0                                                                                       
00121c   f005                                                                                                               
00121e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001220   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001222   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001224   2b24     INCF      0x24,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001226   d021     BRA       0x126a             else if(start_up_state == 2)                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001228   0e02     MOVLW     0x2                                                                                             
00122a   5d24     SUBWF     0x24,0x0,0x1                                                                                    
00122c   e10e     BNZ       0x124a                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00122e   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001230   51e5     MOVF      0xe5,0x0,0x1                                                                                    
001232   e10a     BNZ       0x1248                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001234   0e61     MOVLW     0x61                       putrsUSBUSART("\rMicrochip Technology Inc., 2004\r\n");              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001236   6ee6     MOVWF     0xe6,0x0                                                                                        
001238   0e19     MOVLW     0x19                                                                                            
00123a   6ee6     MOVWF     0xe6,0x0                                                                                        
00123c   ec21     CALL      0xa42,0x0                                                                                       
00123e   f005                                                                                                               
001240   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001242   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001244   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001246   2b24     INCF      0x24,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001248   d010     BRA       0x126a             else if(start_up_state == 3)                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00124a   0e03     MOVLW     0x3                                                                                             
00124c   5d24     SUBWF     0x24,0x0,0x1                                                                                    
00124e   e10d     BNZ       0x126a                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001250   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001252   51e5     MOVF      0xe5,0x0,0x1                                                                                    
001254   e10a     BNZ       0x126a                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001256   0e7a     MOVLW     0x7a                       putrsUSBUSART(welcome);                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001258   6ee6     MOVWF     0xe6,0x0                                                                                        
00125a   0e18     MOVLW     0x18                                                                                            
00125c   6ee6     MOVWF     0xe6,0x0                                                                                        
00125e   ec21     CALL      0xa42,0x0                                                                                       
001260   f005                                                                                                               
001262   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001264   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001266   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001268   2b24     INCF      0x24,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00126a   0012     RETURN    0x0            }//end Exercise_Example                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_01(void)                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Write code in this function that sends a literal null-terminated          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * string of text ("Hello World!\r\n") to the PC when switch 2 is            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * pressed.                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  Switch2IsPressed() returns '1' when switch 2 is pressed.                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  putrsUSBUSART(...);                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * See examples in Exercise_Example();                                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /* Insert code here - 3 lines */                                             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00126c   0100     MOVLB     0x0                if(mUSBUSARTIsTxTrfReady())                                                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00126e   51e5     MOVF      0xe5,0x0,0x1                                                                                    
001270   e108     BNZ       0x1282                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001272   0e52     MOVLW     0x52                   putrsUSBUSART("Hello World!\r\n");                                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001274   6ee6     MOVWF     0xe6,0x0                                                                                        
001276   0e19     MOVLW     0x19                                                                                            
001278   6ee6     MOVWF     0xe6,0x0                                                                                        
00127a   ec21     CALL      0xa42,0x0                                                                                       
00127c   f005                                                                                                               
00127e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001280   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001282   0012     RETURN    0x0            }//end Exercise_01                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           rom char ex02_string[]={"Type in a string here.\r\n"};                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_02(void)                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Write code in this function that sends a null-terminated string           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * of text stored in program memory pointed to by "ex02_string" to           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * the PC when switch 3 is pressed.                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * ex02_string is declared right above this function.                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  Switch3IsPressed() returns '1' when switch 3 is pressed.                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  putrsUSBUSART(...);                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * See examples in Exercise_Example();                                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /* Insert code here - 3 lines*/                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001284   0012     RETURN    0x0            }//end Exercise_02                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_03(void)                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Write code in this function that reads data from USB and                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * toggles LED D4 when the data read equals ASCII character '1' (0x31)       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  byte getsUSBUSART(char *buffer, byte len)   See cdc.c for details        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  mLED_4_Toggle();                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Use input_buffer[] to store data read from USB.                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /* Insert code here - 3 lines */                                             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001286   0012     RETURN    0x0            }//end Exercise_03                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_04(void)                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Before starting Exercise_04(), comment out the call to Exercise_01()      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * in ProcessIO(); This function will need to check Switch2IsPressed().      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Write code in this function that sends the following 4 bytes of           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * data: 0x30,0x31,0x32,0x33 when switch 2 is pressed.                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Note that these data is not null-terminated and is located in             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * the data memory.                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  Switch2IsPressed() returns '1' when switch 2 is pressed.                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  mUSBUSARTTxRam(byte *pData, byte len) See cdc.h for details.             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Use output_buffer[] to store the four bytes data.                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /* Insert code here - 7 lines */                                             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           	                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001288   0012     RETURN    0x0            }//end Exercise_04                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void Exercise_05(void)                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * The PICDEM Full-Speed USB Demo Board is equipped with a                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * temperature sensor. See temperature.c & .h for details.                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * All necessary functions to collect temperature data have                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * been called. This function updates the data a few times                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * every second. The program currently sends out the                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * temperature data to the PC via UART.                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * You can check this by hooking up a serial cable and                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * set your serial port to 19200 baud, 8 bit data, 1 Stop,                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * no parity.                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * The program assumes CPU Frequency = 48 MHz to generate                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * the correct SPBRG value for 19200 baud transmission.                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Modify the code to send the ASCII string stored in                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * tempString to the PC via USB instead of UART.                             C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * The temperature data is stored in tempString array in                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * ASCII format and is null-terminated.                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Useful function:                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  putsUSBUSART(...);                                                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *  Note: It is 'puts' and not 'putrs' to be used here.                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               static word ex05_count;                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00128a   0100     MOVLB     0x0                if(ex05_count == 0)                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00128c   51e2     MOVF      0xe2,0x0,0x1                                                                                    
00128e   11e3     IORWF     0xe3,0x0,0x1                                                                                    
001290   e112     BNZ       0x12b6                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001292   ece0     CALL      0x13c0,0x0             AcquireTemperature();               // Read temperature from sensor      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001294   f009                                                                                                               
001296   ecf1     CALL      0x13e2,0x0             UpdateCelsiusASCII();               // Convert to ASCII, stored in       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001298   f009                                                                                                               
                                                                                       // "tempString", See temperature.c   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                   /* Modify the code below - 3 lines */                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00129a   0e02     MOVLW     0x2                        putsUSART(tempString);                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00129c   6ee6     MOVWF     0xe6,0x0                                                                                        
00129e   0e01     MOVLW     0x1                                                                                             
0012a0   6ee6     MOVWF     0xe6,0x0                                                                                        
0012a2   ec69     CALL      0x18d2,0x0                                                                                      
0012a4   f00c                                                                                                               
0012a6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012a8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012aa   0100     MOVLB     0x0                        ex05_count = 10000;                                                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012ac   0e10     MOVLW     0x10                                                                                            
0012ae   6fe2     MOVWF     0xe2,0x1                                                                                        
0012b0   0e27     MOVLW     0x27                                                                                            
0012b2   6fe3     MOVWF     0xe3,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                   /* End */                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012b4   d003     BRA       0x12bc             else                                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012b6   07e2     DECF      0xe2,0x1,0x1           ex05_count--;                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012b8   0e00     MOVLW     0x0                                                                                             
0012ba   5be3     SUBWFB    0xe3,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012bc   0012     RETURN    0x0            }//end Exercise_05                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Function:        void BlinkUSBStatus(void)                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Overview:        BlinkUSBStatus turns on and off LEDs corresponding to        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                  the USB device state.                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            * Note:            mLED macros can be found in io_cfg.h                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                  usb_device_state is declared in usbmmap.c and is modified    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *                  in usbdrv.c, usbctrltrf.c, and usb9.c                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           void BlinkUSBStatus(void)                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               static word led_count=0;                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012be   0101     MOVLB     0x1                if(led_count == 0)led_count = 10000U;                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012c0   5125     MOVF      0x25,0x0,0x1                                                                                    
0012c2   1126     IORWF     0x26,0x0,0x1                                                                                    
0012c4   e104     BNZ       0x12ce                                                                                          
0012c6   0e10     MOVLW     0x10                                                                                            
0012c8   6f25     MOVWF     0x25,0x1                                                                                        
0012ca   0e27     MOVLW     0x27                                                                                            
0012cc   6f26     MOVWF     0x26,0x1                                                                                        
0012ce   0725     DECF      0x25,0x1,0x1       led_count--;                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012d0   0e00     MOVLW     0x0                                                                                             
0012d2   5b26     SUBWFB    0x26,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               #define mLED_Both_Off()         {mLED_1_Off();mLED_2_Off();}                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               #define mLED_Both_On()          {mLED_1_On();mLED_2_On();}                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               #define mLED_Only_1_On()        {mLED_1_On();mLED_2_Off();}                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               #define mLED_Only_2_On()        {mLED_1_Off();mLED_2_On();}                  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012d4   a26d     BTFSS     0x6d,0x1,0x0       if(UCONbits.SUSPND == 1)                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012d6   d00b     BRA       0x12ee                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012d8   5125     MOVF      0x25,0x0,0x1           if(led_count==0)                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012da   1126     IORWF     0x26,0x0,0x1                                                                                    
0012dc   e107     BNZ       0x12ec                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012de   708c     BTG       0x8c,0x0,0x0               mLED_1_Toggle();                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012e0   508c     MOVF      0x8c,0x0,0x0               mLED_2 = mLED_1;        // Both blink at the same time               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012e2   0b01     ANDLW     0x1                                                                                             
0012e4   e002     BZ        0x12ea                                                                                          
0012e6   828c     BSF       0x8c,0x1,0x0                                                                                    
0012e8   d001     BRA       0x12ec                                                                                          
0012ea   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }//end if                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012ec   d02f     BRA       0x134c             else                                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012ee   0101     MOVLB     0x1                    if(usb_device_state == DETACHED_STATE)                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012f0   511e     MOVF      0x1e,0x0,0x1                                                                                    
0012f2   e103     BNZ       0x12fa                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012f4   908c     BCF       0x8c,0x0,0x0               mLED_Both_Off();                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012f6   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012f8   d029     BRA       0x134c                 else if(usb_device_state == ATTACHED_STATE)                              C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012fa   051e     DECF      0x1e,0x0,0x1                                                                                    
0012fc   e103     BNZ       0x1304                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
0012fe   808c     BSF       0x8c,0x0,0x0               mLED_Both_On();                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001300   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001302   d024     BRA       0x134c                 else if(usb_device_state == POWERED_STATE)                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001304   0e02     MOVLW     0x2                                                                                             
001306   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
001308   e103     BNZ       0x1310                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00130a   808c     BSF       0x8c,0x0,0x0               mLED_Only_1_On();                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00130c   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00130e   d01e     BRA       0x134c                 else if(usb_device_state == DEFAULT_STATE)                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001310   0e03     MOVLW     0x3                                                                                             
001312   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
001314   e103     BNZ       0x131c                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001316   908c     BCF       0x8c,0x0,0x0               mLED_Only_2_On();                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001318   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00131a   d018     BRA       0x134c                 else if(usb_device_state == ADDRESS_STATE)                               C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00131c   0e05     MOVLW     0x5                                                                                             
00131e   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
001320   e107     BNZ       0x1330                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001322   0101     MOVLB     0x1                        if(led_count == 0)                                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001324   5125     MOVF      0x25,0x0,0x1                                                                                    
001326   1126     IORWF     0x26,0x0,0x1                                                                                    
001328   e102     BNZ       0x132e                                                                                          
                                                       {                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00132a   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00132c   928c     BCF       0x8c,0x1,0x0                   mLED_2_Off();                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                       }//end if                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00132e   d00e     BRA       0x134c                 else if(usb_device_state == CONFIGURED_STATE)                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001330   0e06     MOVLW     0x6                                                                                             
001332   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
001334   e10b     BNZ       0x134c                                                                                          
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001336   0101     MOVLB     0x1                        if(led_count==0)                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001338   5125     MOVF      0x25,0x0,0x1                                                                                    
00133a   1126     IORWF     0x26,0x0,0x1                                                                                    
00133c   e107     BNZ       0x134c                                                                                          
                                                       {                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00133e   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001340   508c     MOVF      0x8c,0x0,0x0                   mLED_2 = !mLED_1;       // Alternate blink                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001342   0b01     ANDLW     0x1                                                                                             
001344   e002     BZ        0x134a                                                                                          
001346   928c     BCF       0x8c,0x1,0x0                                                                                    
001348   d001     BRA       0x134c                                                                                          
00134a   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                       }//end if                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                   }//end if(...)                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                               }//end if(UCONbits.SUSPND...)                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00134c   0012     RETURN    0x0            }//end BlinkUSBStatus                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           BOOL Switch2IsPressed(void)                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00134e   5081     MOVF      0x81,0x0,0x0       if(sw2 != old_sw2)                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001350   0b10     ANDLW     0x10                                                                                            
001352   e001     BZ        0x1356                                                                                          
001354   0e01     MOVLW     0x1                                                                                             
001356   0100     MOVLB     0x0                                                                                             
001358   5d60     SUBWF     0x60,0x0,0x1                                                                                    
00135a   e009     BZ        0x136e                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00135c   5081     MOVF      0x81,0x0,0x0           old_sw2 = sw2;                  // Save new value                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00135e   0b10     ANDLW     0x10                                                                                            
001360   e001     BZ        0x1364                                                                                          
001362   0e01     MOVLW     0x1                                                                                             
001364   6f60     MOVWF     0x60,0x1                                                                                        
001366   b881     BTFSC     0x81,0x4,0x0           if(sw2 == 0)                    // If pressed                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001368   d002     BRA       0x136e                                                                                          
00136a   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00136c   d002     BRA       0x1372                                                                                          
                                               }//end if                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00136e   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001370   d000     BRA       0x1372                                                                                          
001372   0012     RETURN    0x0            }//end Switch2IsPressed                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           BOOL Switch3IsPressed(void)                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001374   5081     MOVF      0x81,0x0,0x0       if(sw3 != old_sw3)                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001376   0b20     ANDLW     0x20                                                                                            
001378   e001     BZ        0x137c                                                                                          
00137a   0e01     MOVLW     0x1                                                                                             
00137c   0100     MOVLB     0x0                                                                                             
00137e   5d61     SUBWF     0x61,0x0,0x1                                                                                    
001380   e009     BZ        0x1394                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001382   5081     MOVF      0x81,0x0,0x0           old_sw3 = sw3;                  // Save new value                        C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001384   0b20     ANDLW     0x20                                                                                            
001386   e001     BZ        0x138a                                                                                          
001388   0e01     MOVLW     0x1                                                                                             
00138a   6f61     MOVWF     0x61,0x1                                                                                        
00138c   ba81     BTFSC     0x81,0x5,0x0           if(sw3 == 0)                    // If pressed                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
00138e   d002     BRA       0x1394                                                                                          
001390   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001392   d002     BRA       0x1398                                                                                          
                                               }//end if                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001394   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
001396   d000     BRA       0x1398                                                                                          
001398   0012     RETURN    0x0            }//end Switch3IsPressed                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /** EOF user.c ***************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\user.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *             Microchip USB C18 Firmware -  CDC Version 1.0                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * FileName:        cdc.c                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Rawin Rojvanit       11/19/04    Original. RS-232 Emulation Subset            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #ifdef USB_USE_CDC                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte cdc_rx_len;            // total rx length                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte cdc_trf_state;         // States are defined cdc.h                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           POINTER pCDCSrc;            // Dedicated source pointer                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           POINTER pCDCDst;            // Dedicated destination pointer                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte cdc_tx_len;            // total tx length                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte cdc_mem_type;          // _ROM, _RAM                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           LINE_CODING line_coding;    // Buffer to store line coding information           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           CONTROL_SIGNAL_BITMAP control_signal_bitmap;                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /*                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * SEND_ENCAPSULATED_COMMAND and GET_ENCAPSULATED_RESPONSE are required          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * requests according to the CDC specification.                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * However, it is not really being used here, therefore a dummy buffer is        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * used for conformance.                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            */                                                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #define dummy_length    0x08                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte dummy_encapsulated_cmd_response[dummy_length];                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** C L A S S  S P E C I F I C  R E Q ****************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void USBCheckCDCRequest(void)                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  knows how to handle it                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           void USBCheckCDCRequest(void)                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * If request recipient is not an interface then return                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000838   0104     MOVLB     0x4                if(SetupPkt.d.Recipient != RCPT_INTF) return;                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00083a   5120     MOVF      0x20,0x0,0x1                                                                                    
00083c   0b1f     ANDLW     0x1f                                                                                            
00083e   0801     SUBLW     0x1                                                                                             
000840   e001     BZ        0x844                                                                                           
000842   d05b     BRA       0x8fa                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * If request type is not class-specific then return                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000844   5120     MOVF      0x20,0x0,0x1       if(SetupPkt.d.RequestType != CLASS) return;                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000846   0b60     ANDLW     0x60                                                                                            
000848   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00084a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00084c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00084e   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000850   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000852   0801     SUBLW     0x1                                                                                             
000854   e001     BZ        0x858                                                                                           
000856   d051     BRA       0x8fa                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Interface ID must match interface numbers associated with                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * CDC class, else return                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000858   5124     MOVF      0x24,0x0,0x1       if((SetupPkt.h.bIntfID != CDC_COMM_INTF_ID)&&                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00085a   e003     BZ        0x862                 (SetupPkt.h.bIntfID != CDC_DATA_INTF_ID)) return;                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00085c   0524     DECF      0x24,0x0,0x1                                                                                    
00085e   e001     BZ        0x862                                                                                           
000860   d04c     BRA       0x8fa                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000862   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.b.bRequest)                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000864   0a23     XORLW     0x23                                                                                            
000866   e048     BZ        0x8f8                                                                                           
000868   0a01     XORLW     0x1                                                                                             
00086a   e040     BZ        0x8ec                                                                                           
00086c   0a03     XORLW     0x3                                                                                             
00086e   e030     BZ        0x8d0                                                                                           
000870   0a01     XORLW     0x1                                                                                             
000872   e025     BZ        0x8be                                                                                           
000874   0a24     XORLW     0x24                                                                                            
000876   e022     BZ        0x8bc                                                                                           
000878   0a07     XORLW     0x7                                                                                             
00087a   e01f     BZ        0x8ba                                                                                           
00087c   0a01     XORLW     0x1                                                                                             
00087e   e01c     BZ        0x8b8                                                                                           
000880   0a03     XORLW     0x3                                                                                             
000882   e011     BZ        0x8a6                                                                                           
000884   0a01     XORLW     0x1                                                                                             
000886   e001     BZ        0x88a                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SEND_ENCAPSULATED_COMMAND:                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00088a   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00088c   0e03     MOVLW     0x3                                                                                             
00088e   6f17     MOVWF     0x17,0x1                                                                                        
000890   0101     MOVLB     0x1                        pSrc.bRam = (byte*)dummy_encapsulated_cmd_response;                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000892   0ef7     MOVLW     0xf7                                                                                            
000894   6f18     MOVWF     0x18,0x1                                                                                        
000896   0e00     MOVLW     0x0                                                                                             
000898   6f19     MOVWF     0x19,0x1                                                                                        
00089a   0101     MOVLB     0x1                        usb_stat.a.ctrl_trf_mem = _RAM;                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00089c   931f     BCF       0x1f,0x1,0x1                                                                                    
00089e   0101     MOVLB     0x1                        LSB(wCount) = dummy_length;                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008a0   0e08     MOVLW     0x8                                                                                             
0008a2   6f1c     MOVWF     0x1c,0x1                                                                                        
0008a4   d02a     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case GET_ENCAPSULATED_RESPONSE:                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008a6   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008a8   0e03     MOVLW     0x3                                                                                             
0008aa   6f17     MOVWF     0x17,0x1                                                                                        
                                                       // Populate dummy_encapsulated_cmd_response first.                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008ac   0101     MOVLB     0x1                        pDst.bRam = (byte*)dummy_encapsulated_cmd_response;                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008ae   0ef7     MOVLW     0xf7                                                                                            
0008b0   6f1a     MOVWF     0x1a,0x1                                                                                        
0008b2   0e00     MOVLW     0x0                                                                                             
0008b4   6f1b     MOVWF     0x1b,0x1                                                                                        
0008b6   d021     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SET_COMM_FEATURE:                  // Optional                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008b8   d020     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case GET_COMM_FEATURE:                  // Optional                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008ba   d01f     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case CLEAR_COMM_FEATURE:                // Optional                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008bc   d01e     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SET_LINE_CODING:                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008be   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008c0   0e03     MOVLW     0x3                                                                                             
0008c2   6f17     MOVWF     0x17,0x1                                                                                        
0008c4   0101     MOVLB     0x1                        pDst.bRam = (byte*)&line_coding;    // Set destination               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008c6   0eec     MOVLW     0xec                                                                                            
0008c8   6f1a     MOVWF     0x1a,0x1                                                                                        
0008ca   0e00     MOVLW     0x0                                                                                             
0008cc   6f1b     MOVWF     0x1b,0x1                                                                                        
0008ce   d015     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case GET_LINE_CODING:                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008d0   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008d2   0e03     MOVLW     0x3                                                                                             
0008d4   6f17     MOVWF     0x17,0x1                                                                                        
0008d6   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&line_coding;    // Set source                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008d8   0eec     MOVLW     0xec                                                                                            
0008da   6f18     MOVWF     0x18,0x1                                                                                        
0008dc   0e00     MOVLW     0x0                                                                                             
0008de   6f19     MOVWF     0x19,0x1                                                                                        
0008e0   0101     MOVLB     0x1                        usb_stat.a.ctrl_trf_mem = _RAM;       // Set memory type             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008e2   931f     BCF       0x1f,0x1,0x1                                                                                    
0008e4   0101     MOVLB     0x1                        LSB(wCount) = LINE_CODING_LENGTH;   // Set data count                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008e6   0e07     MOVLW     0x7                                                                                             
0008e8   6f1c     MOVWF     0x1c,0x1                                                                                        
0008ea   d007     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SET_CONTROL_LINE_STATE:                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008ec   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008ee   0e03     MOVLW     0x3                                                                                             
0008f0   6f17     MOVWF     0x17,0x1                                                                                        
0008f2   c422     MOVFF     0x422,0xf3                 control_signal_bitmap._byte = LSB(SetupPkt.c.W_Value);               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008f4   f0f3                                                                                                               
0008f6   d001     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SEND_BREAK:                        // Optional                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008f8   d000     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   default:                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000888   d038     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               }//end switch(SetupPkt.bRequest)                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008fa   0012     RETURN    0x0            }//end USBCheckCDCRequest                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** U S E R  A P I ***********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void CDCInitEP(void)                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        CDCInitEP initializes CDC endpoints, buffer descriptors,     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  internal state-machine, and variables.                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  It should be called after the USB host has sent out a        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  SET_CONFIGURATION request.                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           void CDCInitEP(void)                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               //Abstract line coding information                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008fc   0100     MOVLB     0x0                line_coding.b.dwDTERate._dword = 115200;     // baud rate                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0008fe   6bec     CLRF      0xec,0x1                                                                                        
000900   0ec2     MOVLW     0xc2                                                                                            
000902   6fed     MOVWF     0xed,0x1                                                                                        
000904   0e01     MOVLW     0x1                                                                                             
000906   6fee     MOVWF     0xee,0x1                                                                                        
000908   6bef     CLRF      0xef,0x1                                                                                        
00090a   6bf0     CLRF      0xf0,0x1           line_coding.b.bCharFormat = 0x00;            // 1 stop bit                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00090c   6bf1     CLRF      0xf1,0x1           line_coding.b.bParityType = 0x00;            // None                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00090e   0e08     MOVLW     0x8                line_coding.b.bDataBits = 0x08;              // 5,6,7,8, or 16               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000910   6ff2     MOVWF     0xf2,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000912   6be5     CLRF      0xe5,0x1           cdc_trf_state = CDC_TX_READY;                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000914   6be4     CLRF      0xe4,0x1           cdc_rx_len = 0;                                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000916   0e1a     MOVLW     0x1a               CDC_COMM_UEP = EP_IN|HSHK_EN;               // Enable 1 Comm pipe            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000918   6e72     MOVWF     0x72,0x0                                                                                        
00091a   0e1e     MOVLW     0x1e               CDC_DATA_UEP = EP_OUT_IN|HSHK_EN;           // Enable 2 data pipes           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00091c   6e73     MOVWF     0x73,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Do not have to init Cnt of IN pipes here.                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Reason:  Number of bytes to send to the host                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          varies from one transaction to                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          another. Cnt should equal the exact                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          number of bytes to transmit for                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          a given IN transaction.                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          This number of bytes will only                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          be known right before the data is                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          sent.                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00091e   0104     MOVLB     0x4                CDC_INT_BD_IN.b.ADR = (byte*)cdc_notice;     // Set buffer address           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000920   0e00     MOVLW     0x0                                                                                             
000922   6f16     MOVWF     0x16,0x1                                                                                        
000924   0e05     MOVLW     0x5                                                                                             
000926   6f17     MOVWF     0x17,0x1                                                                                        
000928   0e40     MOVLW     0x40               CDC_INT_BD_IN.a.Stat._byte = _UCPU|_DAT1;     // Set status                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00092a   6f14     MOVWF     0x14,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00092c   6f19     MOVWF     0x19,0x1           CDC_BULK_BD_OUT.a.Cnt = sizeof(cdc_data_rx);  // Set buffer size             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00092e   0e08     MOVLW     0x8                CDC_BULK_BD_OUT.b.ADR = (byte*)cdc_data_rx;  // Set buffer address           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000930   6f1a     MOVWF     0x1a,0x1                                                                                        
000932   0e05     MOVLW     0x5                                                                                             
000934   6f1b     MOVWF     0x1b,0x1                                                                                        
000936   0e88     MOVLW     0x88               CDC_BULK_BD_OUT.a.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000938   6f18     MOVWF     0x18,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00093a   0e48     MOVLW     0x48               CDC_BULK_BD_IN.b.ADR = (byte*)cdc_data_tx;   // Set buffer size              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00093c   6f1e     MOVWF     0x1e,0x1                                                                                        
00093e   0e05     MOVLW     0x5                                                                                             
000940   6f1f     MOVWF     0x1f,0x1                                                                                        
000942   0e40     MOVLW     0x40               CDC_BULK_BD_IN.a.Stat._byte = _UCPU|_DAT1;    // Set buffer address          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000944   6f1c     MOVWF     0x1c,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000946   0012     RETURN    0x0            }//end CDCInitEP                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        byte getsUSBUSART(char *buffer,                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                    byte len)                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    Value of input argument 'len' should be smaller than the     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  maximum endpoint size responsible for receiving bulk         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  data from USB host for CDC class.                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  Input argument 'buffer' should point to a buffer area that   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  is bigger or equal to the size specified by 'len'.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           buffer  : Pointer to where received bytes are to be stored   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  len     : The number of bytes expected.                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          The number of bytes copied to buffer.                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    Publicly accessible variable cdc_rx_len is updated with      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  the number of bytes copied to buffer.                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  Once getsUSBUSART is called, subsequent retrieval of         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  cdc_rx_len can be done by calling macro mCDCGetRxLength().   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        getsUSBUSART copies a string of bytes received through       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  USB CDC Bulk OUT endpoint to a user's specified location.    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  It is a non-blocking function. It does not wait              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  for data if there is no data available. Instead it returns   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  '0' to notify the caller that there is no data available.    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            If the actual number of bytes received is larger than the    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  number of bytes expected (len), only the expected number     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  of bytes specified will be copied to buffer.                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  If the actual number of bytes received is smaller than the   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  number of bytes expected (len), only the actual number       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  of bytes received will be copied to buffer.                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000948   cfd9     MOVFF     0xfd9,0xfe6    byte getsUSBUSART(char *buffer, byte len)                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00094a   ffe6                                                                                                               
00094c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00094e   ffd9                                                                                                               
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000950   0100     MOVLB     0x0                cdc_rx_len = 0;                                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000952   6be4     CLRF      0xe4,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000954   0104     MOVLB     0x4                if(!mCDCUsartRxIsBusy())                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000956   bf18     BTFSC     0x18,0x7,0x1                                                                                    
000958   d030     BRA       0x9ba                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Adjust the expected number of bytes to equal                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * the actual number of bytes received.                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00095a   0efc     MOVLW     0xfc                   if(len > CDC_BULK_BD_OUT.a.Cnt)                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00095c   cfdb     MOVFF     0xfdb,0x10                                                                                      
00095e   f010                                                                                                               
000960   5119     MOVF      0x19,0x0,0x1                                                                                    
000962   80d8     BSF       0xd8,0x0,0x0                                                                                    
000964   5410     SUBFWB    0x10,0x0,0x0                                                                                    
000966   e203     BC        0x96e                                                                                           
000968   0efc     MOVLW     0xfc                       len = CDC_BULK_BD_OUT.a.Cnt;                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00096a   c419     MOVFF     0x419,0xfdb                                                                                     
00096c   ffdb                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Copy data from dual-ram buffer to user's buffer                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00096e   0100     MOVLB     0x0                    for(cdc_rx_len = 0; cdc_rx_len < len; cdc_rx_len++)                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000970   6be4     CLRF      0xe4,0x1                                                                                        
000972   0efc     MOVLW     0xfc                                                                                            
000974   50db     MOVF      0xdb,0x0,0x0                                                                                    
000976   5de4     SUBWF     0xe4,0x0,0x1                                                                                    
000978   e219     BC        0x9ac                                                                                           
0009a8   2be4     INCF      0xe4,0x1,0x1                                                                                    
0009aa   d7e3     BRA       0x972                                                                                           
00097a   51e4     MOVF      0xe4,0x0,0x1               buffer[cdc_rx_len] = cdc_data_rx[cdc_rx_len];                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
00097c   6aea     CLRF      0xea,0x0                                                                                        
00097e   0f08     ADDLW     0x8                                                                                             
000980   6ee9     MOVWF     0xe9,0x0                                                                                        
000982   0e05     MOVLW     0x5                                                                                             
000984   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000986   50ef     MOVF      0xef,0x0,0x0                                                                                    
000988   6ee6     MOVWF     0xe6,0x0                                                                                        
00098a   51e4     MOVF      0xe4,0x0,0x1                                                                                    
00098c   6ee7     MOVWF     0xe7,0x0                                                                                        
00098e   0efd     MOVLW     0xfd                                                                                            
000990   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000992   ffe9                                                                                                               
000994   0efe     MOVLW     0xfe                                                                                            
000996   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000998   ffea                                                                                                               
00099a   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00099c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00099e   0e00     MOVLW     0x0                                                                                             
0009a0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0009a2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009a4   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0009a6   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Prepare dual-ram buffer for next OUT transaction                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009ac   0104     MOVLB     0x4                    CDC_BULK_BD_OUT.a.Cnt = sizeof(cdc_data_rx);                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009ae   0e40     MOVLW     0x40                                                                                            
0009b0   6f19     MOVWF     0x19,0x1                                                                                        
0009b2   1718     ANDWF     0x18,0x1,0x1           mUSBBufferReady(CDC_BULK_BD_OUT);                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009b4   7d18     BTG       0x18,0x6,0x1                                                                                    
0009b6   0e88     MOVLW     0x88                                                                                            
0009b8   1318     IORWF     0x18,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009ba   0100     MOVLB     0x0                return cdc_rx_len;                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009bc   51e4     MOVF      0xe4,0x0,0x1                                                                                    
0009be   d000     BRA       0x9c0                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009c0   52e5     MOVF      0xe5,0x1,0x0   }//end getsUSBUSART                                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009c2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0009c4   ffd9                                                                                                               
0009c6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void putsUSBUSART(char *data)                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    cdc_trf_state must be in the CDC_TX_READY state.             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  The string of characters pointed to by 'data' must equal     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  to or smaller than 255 bytes.                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           data    : Pointer to a null-terminated string of data.       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                            If a null character is not found, 255 bytes        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                            of data will be transferred to the host.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        putsUSBUSART writes a string of data to the USB including    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  the null character. Use this version, 'puts', to transfer    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  data located in data memory.                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            The transfer mechanism for device-to-host(put) is more       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  flexible than host-to-device(get). It can handle             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  a string of data larger than the maximum size of bulk IN     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  endpoint. A state machine is used to transfer a long         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  string of data over multiple USB transactions.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  See CDCTxService() for more details.                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009c8   cfd9     MOVFF     0xfd9,0xfe6    void putsUSBUSART(char *data)                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009ca   ffe6                                                                                                               
0009cc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0009ce   ffd9                                                                                                               
0009d0   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               byte len;                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * User should have checked that cdc_trf_state is in CDC_TX_READY state      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * before calling this function.                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * As a safety precaution, this fuction checks the state one more time       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * to make sure it does not override any pending transactions.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Currently it just quits the routine without reporting any errors back     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * to the user.                                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Bottomline: User MUST make sure that mUSBUSARTIsTxTrfReady()==1           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *             before calling this function!                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Example:                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * if(mUSBUSARTIsTxTrfReady())                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * IMPORTANT: Never use the following blocking while loop to wait:           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * while(!mUSBUSARTIsTxTrfReady())                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * The whole firmware framework is written based on cooperative              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * multi-tasking and a blocking code is not acceptable.                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Use a state machine instead.                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009d2   0100     MOVLB     0x0                if(cdc_trf_state != CDC_TX_READY) return;                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009d4   51e5     MOVF      0xe5,0x0,0x1                                                                                    
0009d6   e001     BZ        0x9da                                                                                           
0009d8   d02f     BRA       0xa38                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * While loop counts the number of bytes to send including the               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * null character.                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009da   6adf     CLRF      0xdf,0x0           len = 0;                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               do                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009dc   2adf     INCF      0xdf,0x1,0x0           len++;                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009de   50df     MOVF      0xdf,0x0,0x0           if(len == 255) break;       // Break loop once max len is reached.       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009e0   6e10     MOVWF     0x10,0x0                                                                                        
0009e2   6a11     CLRF      0x11,0x0                                                                                        
0009e4   0eff     MOVLW     0xff                                                                                            
0009e6   1810     XORWF     0x10,0x0,0x0                                                                                    
0009e8   e101     BNZ       0x9ec                                                                                           
0009ea   5011     MOVF      0x11,0x0,0x0                                                                                    
0009ec   e101     BNZ       0x9f0                                                                                           
0009ee   d00b     BRA       0xa06                                                                                           
0009f0   0efd     MOVLW     0xfd               }while(*data++);                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
0009f2   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0009f4   ffe9                                                                                                               
0009f6   2adb     INCF      0xdb,0x1,0x0                                                                                    
0009f8   0efe     MOVLW     0xfe                                                                                            
0009fa   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0009fc   ffea                                                                                                               
0009fe   e301     BNC       0xa02                                                                                           
000a00   2adb     INCF      0xdb,0x1,0x0                                                                                    
000a02   50ef     MOVF      0xef,0x0,0x0                                                                                    
000a04   e1eb     BNZ       0x9dc                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Re-adjust pointer to its initial location                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a06   50df     MOVF      0xdf,0x0,0x0       data-=len;                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a08   6e10     MOVWF     0x10,0x0                                                                                        
000a0a   6a11     CLRF      0x11,0x0                                                                                        
000a0c   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000a0e   0ffd     ADDLW     0xfd                                                                                            
000a10   6ee9     MOVWF     0xe9,0x0                                                                                        
000a12   0eff     MOVLW     0xff                                                                                            
000a14   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000a16   6eea     MOVWF     0xea,0x0                                                                                        
000a18   5010     MOVF      0x10,0x0,0x0                                                                                    
000a1a   5eee     SUBWF     0xee,0x1,0x0                                                                                    
000a1c   5011     MOVF      0x11,0x0,0x0                                                                                    
000a1e   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Second piece of information (length of data to send) is ready.            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Call mUSBUSARTTxRam to setup the transfer.                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * The actual transfer process will be handled by CDCTxService(),            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * which should be called once per Main Program loop.                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a20   0efd     MOVLW     0xfd               mUSBUSARTTxRam((byte*)data,len);     // See cdc.h                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a22   cfdb     MOVFF     0xfdb,0xe6                                                                                      
000a24   f0e6                                                                                                               
000a26   0efe     MOVLW     0xfe                                                                                            
000a28   cfdb     MOVFF     0xfdb,0xe7                                                                                      
000a2a   f0e7                                                                                                               
000a2c   cfdf     MOVFF     0xfdf,0xea                                                                                      
000a2e   f0ea                                                                                                               
000a30   0100     MOVLB     0x0                                                                                             
000a32   6beb     CLRF      0xeb,0x1                                                                                        
000a34   0e01     MOVLW     0x1                                                                                             
000a36   6fe5     MOVWF     0xe5,0x1                                                                                        
000a38   52e5     MOVF      0xe5,0x1,0x0   }//end putsUSBUSART                                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a3a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a3c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000a3e   ffd9                                                                                                               
000a40   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void putrsUSBUSART(const rom char *data)                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    cdc_trf_state must be in the CDC_TX_READY state.             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  The string of characters pointed to by 'data' must equal     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  to or smaller than 255 bytes.                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           data    : Pointer to a null-terminated string of data.       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                            If a null character is not found, 255 bytes        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                            of data will be transferred to the host.           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        putrsUSBUSART writes a string of data to the USB including   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  the null character. Use this version, 'putrs', to transfer   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  data literals and data located in program memory.            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            The transfer mechanism for device-to-host(put) is more       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  flexible than host-to-device(get). It can handle             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  a string of data larger than the maximum size of bulk IN     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  endpoint. A state machine is used to transfer a long         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  string of data over multiple USB transactions.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  See CDCTxService() for more details.                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a42   cfd9     MOVFF     0xfd9,0xfe6    void putrsUSBUSART(const_rom char *data)                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a44   ffe6                                                                                                               
000a46   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000a48   ffd9                                                                                                               
000a4a   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               byte len;                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * User should have checked that cdc_trf_state is in CDC_TX_READY state      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * before calling this function.                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * As a safety precaution, this fuction checks the state one more time       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * to make sure it does not override any pending transactions.               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Currently it just quits the routine without reporting any errors back     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * to the user.                                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Bottomline: User MUST make sure that mUSBUSARTIsTxTrfReady()              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *             before calling this function!                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Example:                                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * if(mUSBUSARTIsTxTrfReady())                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * IMPORTANT: Never use the following blocking while loop to wait:           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * while(cdc_trf_state != CDC_TX_READY)                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * The whole firmware framework is written based on cooperative              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * multi-tasking and a blocking code is not acceptable.                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Use a state machine instead.                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a4c   0100     MOVLB     0x0                if(cdc_trf_state != CDC_TX_READY) return;                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a4e   51e5     MOVF      0xe5,0x0,0x1                                                                                    
000a50   e001     BZ        0xa54                                                                                           
000a52   d030     BRA       0xab4                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * While loop counts the number of bytes to send including the               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * null character.                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a54   6adf     CLRF      0xdf,0x0           len = 0;                                                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               do                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a56   2adf     INCF      0xdf,0x1,0x0           len++;                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a58   50df     MOVF      0xdf,0x0,0x0           if(len == 255) break;       // Break loop once max len is reached.       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a5a   6e10     MOVWF     0x10,0x0                                                                                        
000a5c   6a11     CLRF      0x11,0x0                                                                                        
000a5e   0eff     MOVLW     0xff                                                                                            
000a60   1810     XORWF     0x10,0x0,0x0                                                                                    
000a62   e101     BNZ       0xa66                                                                                           
000a64   5011     MOVF      0x11,0x0,0x0                                                                                    
000a66   e101     BNZ       0xa6a                                                                                           
000a68   d00c     BRA       0xa82                                                                                           
000a6a   0efd     MOVLW     0xfd               }while(*data++);                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a6c   cfdb     MOVFF     0xfdb,0xff6                                                                                     
000a6e   fff6                                                                                                               
000a70   2adb     INCF      0xdb,0x1,0x0                                                                                    
000a72   0efe     MOVLW     0xfe                                                                                            
000a74   cfdb     MOVFF     0xfdb,0xff7                                                                                     
000a76   fff7                                                                                                               
000a78   e301     BNC       0xa7c                                                                                           
000a7a   2adb     INCF      0xdb,0x1,0x0                                                                                    
000a7c   0008     TBLRD                                                                                                     
000a7e   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000a80   e1ea     BNZ       0xa56                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Re-adjust pointer to its initial location                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a82   50df     MOVF      0xdf,0x0,0x0       data-=len;                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a84   6e10     MOVWF     0x10,0x0                                                                                        
000a86   6a11     CLRF      0x11,0x0                                                                                        
000a88   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000a8a   0ffd     ADDLW     0xfd                                                                                            
000a8c   6ee9     MOVWF     0xe9,0x0                                                                                        
000a8e   0eff     MOVLW     0xff                                                                                            
000a90   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000a92   6eea     MOVWF     0xea,0x0                                                                                        
000a94   5010     MOVF      0x10,0x0,0x0                                                                                    
000a96   5eee     SUBWF     0xee,0x1,0x0                                                                                    
000a98   5011     MOVF      0x11,0x0,0x0                                                                                    
000a9a   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Second piece of information (length of data to send) is ready.            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Call mUSBUSARTTxRom to setup the transfer.                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * The actual transfer process will be handled by CDCTxService(),            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * which should be called once per Main Program loop.                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a9c   0efd     MOVLW     0xfd               mUSBUSARTTxRom((rom byte*)data,len); // See cdc.h                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000a9e   cfdb     MOVFF     0xfdb,0xe6                                                                                      
000aa0   f0e6                                                                                                               
000aa2   0efe     MOVLW     0xfe                                                                                            
000aa4   cfdb     MOVFF     0xfdb,0xe7                                                                                      
000aa6   f0e7                                                                                                               
000aa8   cfdf     MOVFF     0xfdf,0xea                                                                                      
000aaa   f0ea                                                                                                               
000aac   0100     MOVLB     0x0                                                                                             
000aae   0e01     MOVLW     0x1                                                                                             
000ab0   6feb     MOVWF     0xeb,0x1                                                                                        
000ab2   6fe5     MOVWF     0xe5,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ab4   52e5     MOVF      0xe5,0x1,0x0   }//end putrsUSBUSART                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ab6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ab8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000aba   ffd9                                                                                                               
000abc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void CDCTxService(void)                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        CDCTxService handles device-to-host transaction(s).          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  This function should be called once per Main Program loop.   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000abe   cfd9     MOVFF     0xfd9,0xfe6    void CDCTxService(void)                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ac0   ffe6                                                                                                               
000ac2   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000ac4   ffd9                                                                                                               
000ac6   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               byte byte_to_send;                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ac8   0104     MOVLB     0x4                if(mCDCUsartTxIsBusy()) return;                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000aca   bf1c     BTFSC     0x1c,0x7,0x1                                                                                    
000acc   d06b     BRA       0xba4                                                                                           
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Completing stage is necessary while [ mCDCUSartTxIsBusy()==1 ].           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * By having this stage, user can always check cdc_trf_state,                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * and not having to call mCDCUsartTxIsBusy() directly.                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ace   0e03     MOVLW     0x3                if(cdc_trf_state == CDC_TX_COMPLETING)                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ad0   0100     MOVLB     0x0                                                                                             
000ad2   5de5     SUBWF     0xe5,0x0,0x1                                                                                    
000ad4   e101     BNZ       0xad8                                                                                           
000ad6   6be5     CLRF      0xe5,0x1               cdc_trf_state = CDC_TX_READY;                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * If CDC_TX_READY state, nothing to do, just return.                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ad8   51e5     MOVF      0xe5,0x0,0x1       if(cdc_trf_state == CDC_TX_READY) return;                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ada   e101     BNZ       0xade                                                                                           
000adc   d063     BRA       0xba4                                                                                           
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * If CDC_TX_BUSY_ZLP state, send zero length packet                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ade   0e02     MOVLW     0x2                if(cdc_trf_state == CDC_TX_BUSY_ZLP)                                         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ae0   5de5     SUBWF     0xe5,0x0,0x1                                                                                    
000ae2   e106     BNZ       0xaf0                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ae4   0104     MOVLB     0x4                    CDC_BULK_BD_IN.a.Cnt = 0;                                                C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ae6   6b1d     CLRF      0x1d,0x1                                                                                        
000ae8   0100     MOVLB     0x0                    cdc_trf_state = CDC_TX_COMPLETING;                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000aea   0e03     MOVLW     0x3                                                                                             
000aec   6fe5     MOVWF     0xe5,0x1                                                                                        
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000aee   d054     BRA       0xb98              else if(cdc_trf_state == CDC_TX_BUSY)                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000af0   05e5     DECF      0xe5,0x0,0x1                                                                                    
000af2   e152     BNZ       0xb98                                                                                           
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * First, have to figure out how many byte of data to send.              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000af4   0e40     MOVLW     0x40               	if(cdc_tx_len > sizeof(cdc_data_tx))                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000af6   6e10     MOVWF     0x10,0x0                                                                                        
000af8   6a11     CLRF      0x11,0x0                                                                                        
000afa   51ea     MOVF      0xea,0x0,0x1                                                                                    
000afc   5c10     SUBWF     0x10,0x0,0x0                                                                                    
000afe   0e00     MOVLW     0x0                                                                                             
000b00   5811     SUBWFB    0x11,0x0,0x0                                                                                    
000b02   e203     BC        0xb0a                                                                                           
000b04   0e40     MOVLW     0x40               	    byte_to_send = sizeof(cdc_data_tx);                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b06   6edf     MOVWF     0xdf,0x0                                                                                        
000b08   d002     BRA       0xb0e              	else                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b0a   c0ea     MOVFF     0xea,0xfdf         	    byte_to_send = cdc_tx_len;                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b0c   ffdf                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Next, load the number of bytes to send to Cnt in buffer descriptor    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b0e   cfdf     MOVFF     0xfdf,0x41d            CDC_BULK_BD_IN.a.Cnt = byte_to_send;                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b10   f41d                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Subtract the number of bytes just about to be sent from the total.    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b12   50df     MOVF      0xdf,0x0,0x0       	cdc_tx_len = cdc_tx_len - byte_to_send;                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b14   5dea     SUBWF     0xea,0x0,0x1                                                                                    
000b16   6fea     MOVWF     0xea,0x1                                                                                        
                                               	                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b18   0e48     MOVLW     0x48                   pCDCDst.bRam = (byte*)cdc_data_tx; // Set destination pointer            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b1a   6fe8     MOVWF     0xe8,0x1                                                                                        
000b1c   0e05     MOVLW     0x5                                                                                             
000b1e   6fe9     MOVWF     0xe9,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b20   05eb     DECF      0xeb,0x0,0x1           if(cdc_mem_type == _ROM)            // Determine type of memory source   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b22   e115     BNZ       0xb4e                                                                                           
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b24   50df     MOVF      0xdf,0x0,0x0               while(byte_to_send)                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b26   e012     BZ        0xb4c                                                                                           
000b4a   d7ec     BRA       0xb24                                                                                           
                                                       {                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b28   c0e6     MOVFF     0xe6,0xff6                     *pCDCDst.bRam = *pCDCSrc.bRom;                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b2a   fff6                                                                                                               
000b2c   c0e7     MOVFF     0xe7,0xff7                                                                                      
000b2e   fff7                                                                                                               
000b30   0008     TBLRD                                                                                                     
000b32   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000b34   c0e8     MOVFF     0xe8,0xfe9                                                                                      
000b36   ffe9                                                                                                               
000b38   c0e9     MOVFF     0xe9,0xfea                                                                                      
000b3a   ffea                                                                                                               
000b3c   6eef     MOVWF     0xef,0x0                                                                                        
000b3e   2be8     INCF      0xe8,0x1,0x1                   pCDCDst.bRam++;                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b40   0e00     MOVLW     0x0                                                                                             
000b42   23e9     ADDWFC    0xe9,0x1,0x1                                                                                    
000b44   2be6     INCF      0xe6,0x1,0x1                   pCDCSrc.bRom++;                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b46   23e7     ADDWFC    0xe7,0x1,0x1                                                                                    
000b48   06df     DECF      0xdf,0x1,0x0                   byte_to_send--;                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                       }//end while(byte_to_send)                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   }                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b4c   d013     BRA       0xb74                  else // _RAM                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b4e   50df     MOVF      0xdf,0x0,0x0               while(byte_to_send)                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b50   e011     BZ        0xb74                                                                                           
000b72   d7ed     BRA       0xb4e                                                                                           
                                                       {                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b52   c0e6     MOVFF     0xe6,0xfe9                     *pCDCDst.bRam = *pCDCSrc.bRam;                                   C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b54   ffe9                                                                                                               
000b56   c0e7     MOVFF     0xe7,0xfea                                                                                      
000b58   ffea                                                                                                               
000b5a   50ef     MOVF      0xef,0x0,0x0                                                                                    
000b5c   c0e8     MOVFF     0xe8,0xfe9                                                                                      
000b5e   ffe9                                                                                                               
000b60   c0e9     MOVFF     0xe9,0xfea                                                                                      
000b62   ffea                                                                                                               
000b64   6eef     MOVWF     0xef,0x0                                                                                        
000b66   2be8     INCF      0xe8,0x1,0x1                   pCDCDst.bRam++;                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b68   0e00     MOVLW     0x0                                                                                             
000b6a   23e9     ADDWFC    0xe9,0x1,0x1                                                                                    
000b6c   2be6     INCF      0xe6,0x1,0x1                   pCDCSrc.bRam++;                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b6e   23e7     ADDWFC    0xe7,0x1,0x1                                                                                    
000b70   06df     DECF      0xdf,0x1,0x0                   byte_to_send--;                                                  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                       }//end while(byte_to_send._word)                                     C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   }//end if(cdc_mem_type...)                                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Lastly, determine if a zero length packet state is necessary.         C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * See explanation in USB Specification 2.0: Section 5.8.3               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b74   51ea     MOVF      0xea,0x0,0x1           if(cdc_tx_len == 0)                                                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b76   e110     BNZ       0xb98                                                                                           
                                                   {                                                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b78   0104     MOVLB     0x4                        if(CDC_BULK_BD_IN.a.Cnt == sizeof(cdc_data_tx))                      C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b7a   511d     MOVF      0x1d,0x0,0x1                                                                                    
000b7c   6e10     MOVWF     0x10,0x0                                                                                        
000b7e   6a11     CLRF      0x11,0x0                                                                                        
000b80   0e40     MOVLW     0x40                                                                                            
000b82   1810     XORWF     0x10,0x0,0x0                                                                                    
000b84   e101     BNZ       0xb88                                                                                           
000b86   5011     MOVF      0x11,0x0,0x0                                                                                    
000b88   e104     BNZ       0xb92                                                                                           
000b8a   0100     MOVLB     0x0                            cdc_trf_state = CDC_TX_BUSY_ZLP;                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b8c   0e02     MOVLW     0x2                                                                                             
000b8e   6fe5     MOVWF     0xe5,0x1                                                                                        
000b90   d003     BRA       0xb98                      else                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b92   0100     MOVLB     0x0                            cdc_trf_state = CDC_TX_COMPLETING;                               C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b94   0e03     MOVLW     0x3                                                                                             
000b96   6fe5     MOVWF     0xe5,0x1                                                                                        
                                                   }//end if(cdc_tx_len...)                                                 C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               }//end if(cdc_tx_sate == CDC_TX_BUSY)                                        C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Both CDC_TX_BUSY and CDC_TX_BUSY_ZLP states use the following macro       C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b98   0e40     MOVLW     0x40               mUSBBufferReady(CDC_BULK_BD_IN);                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000b9a   0104     MOVLB     0x4                                                                                             
000b9c   171c     ANDWF     0x1c,0x1,0x1                                                                                    
000b9e   7d1c     BTG       0x1c,0x6,0x1                                                                                    
000ba0   0e88     MOVLW     0x88                                                                                            
000ba2   131c     IORWF     0x1c,0x1,0x1                                                                                    
000ba4   52e5     MOVF      0xe5,0x1,0x0   }//end CDCTxService                                                              C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
000ba6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ba8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000baa   ffd9                                                                                                               
000bac   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #endif //USB_USE_CDC                                                             C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** EOF cdc.c ****************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                Thermo Sensor with SPI(TM) Interface                           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * FileName:        temperature.c                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           #include <spi.h>                                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           #include "io_cfg.h"                                                              C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           #include "user\temperature.h"                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           WORD temperature;           // Raw data format                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           char tempString[10];        // Buffer for storing data in ASCII format           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Function:        void InitTempSensor(void)                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Overview:        Initializes SPI interface & chip select line                 C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           void InitTempSensor(void)                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00139a   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00139c   9493     BCF       0x93,0x2,0x0       tris_cs_temp_sensor = OUTPUT_PIN;                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00139e   6ae6     CLRF      0xe6,0x0           OpenSPI(SPI_FOSC_64, MODE_11, SMPMID);                                       C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013a0   0e03     MOVLW     0x3                                                                                             
0013a2   6ee6     MOVWF     0xe6,0x0                                                                                        
0013a4   0e02     MOVLW     0x2                                                                                             
0013a6   6ee6     MOVWF     0xe6,0x0                                                                                        
0013a8   ec0a     CALL      0x1814,0x0                                                                                      
0013aa   f00c                                                                                                               
0013ac   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013ae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013b0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                               // Initialize readable values - default to room temperature                  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013b2   0101     MOVLB     0x1                temperature._word = 0x0C87;       // 25 degree celsius                       C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013b4   0e87     MOVLW     0x87                                                                                            
0013b6   6f00     MOVWF     0x0,0x1                                                                                         
0013b8   0e0c     MOVLW     0xc                                                                                             
0013ba   6f01     MOVWF     0x1,0x1                                                                                         
0013bc   eff1     GOTO      0x13e2             UpdateCelsiusASCII();                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013be   f009                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           }//end InitTempSensor                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Function:        void AcquireTemperature(void)                                C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Overview:        None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           BOOL AcquireTemperature(void)                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013c0   948a     BCF       0x8a,0x2,0x0       cs_temp_sensor = 0;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013c2   ecfb     CALL      0x19f6,0x0         MSB(temperature) = ReadSPI();                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013c4   f00c                                                                                                               
0013c6   0101     MOVLB     0x1                                                                                             
0013c8   6f01     MOVWF     0x1,0x1                                                                                         
0013ca   ecfb     CALL      0x19f6,0x0         LSB(temperature) = ReadSPI();                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013cc   f00c                                                                                                               
0013ce   0101     MOVLB     0x1                                                                                             
0013d0   6f00     MOVWF     0x0,0x1                                                                                         
0013d2   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013d4   b500     BTFSC     0x0,0x2,0x1        if(temperature.c.LowB.a.b2 == 0)                                             C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013d6   d002     BRA       0x13dc                                                                                          
0013d8   0e00     MOVLW     0x0                    return FAIL;                                                             C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013da   d002     BRA       0x13e0                                                                                          
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013dc   0e01     MOVLW     0x1                return OK;                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013de   d000     BRA       0x13e0                                                                                          
0013e0   0012     RETURN    0x0            }//end AcquireTemperature                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Function:        void UpdateCelsiusASCII(void)                                C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Overview:        This routine converts data output to ASCII string            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013e2   cfd9     MOVFF     0xfd9,0xfe6    void UpdateCelsiusASCII(void)                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013e4   ffe6                                                                                                               
0013e6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0013e8   ffd9                                                                                                               
0013ea   0e03     MOVLW     0x3                                                                                             
0013ec   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                               WORD temp;                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                               byte i;                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013ee   c100     MOVFF     0x100,0x10         temp._word = temperature._word >> 3;                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0013f0   f010                                                                                                               
0013f2   c101     MOVFF     0x101,0x11                                                                                      
0013f4   f011                                                                                                               
0013f6   90d8     BCF       0xd8,0x0,0x0                                                                                    
0013f8   3211     RRCF      0x11,0x1,0x0                                                                                    
0013fa   3210     RRCF      0x10,0x1,0x0                                                                                    
0013fc   04e8     DECF      0xe8,0x0,0x0                                                                                    
0013fe   e1fb     BNZ       0x13f6                                                                                          
001400   c010     MOVFF     0x10,0xfde                                                                                      
001402   ffde                                                                                                               
001404   c011     MOVFF     0x11,0xfdd                                                                                      
001406   ffdd                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001408   50d9     MOVF      0xd9,0x0,0x0       if(temp.c.HighB.a.b4 == 0)                                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00140a   0f01     ADDLW     0x1                                                                                             
00140c   6ee9     MOVWF     0xe9,0x0                                                                                        
00140e   cfda     MOVFF     0xfda,0xfea                                                                                     
001410   ffea                                                                                                               
001412   50ef     MOVF      0xef,0x0,0x0                                                                                    
001414   0b10     ANDLW     0x10                                                                                            
001416   e108     BNZ       0x1428                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001418   0e01     MOVLW     0x1                    temp.c.HighB._byte &= 0b00011111;                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00141a   9adb     BCF       0xdb,0x5,0x0                                                                                    
00141c   9cdb     BCF       0xdb,0x6,0x0                                                                                    
00141e   9edb     BCF       0xdb,0x7,0x0                                                                                    
001420   0101     MOVLB     0x1                    tempString[0] = '+';                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001422   0e2b     MOVLW     0x2b                                                                                            
001424   6f02     MOVWF     0x2,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001426   d016     BRA       0x1454             else                                                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001428   0e01     MOVLW     0x1                    temp.c.HighB._byte |= 0b11100000;                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00142a   8adb     BSF       0xdb,0x5,0x0                                                                                    
00142c   8cdb     BSF       0xdb,0x6,0x0                                                                                    
00142e   8edb     BSF       0xdb,0x7,0x0                                                                                    
001430   0101     MOVLB     0x1                    tempString[0] = '-';                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001432   0e2d     MOVLW     0x2d                                                                                            
001434   6f02     MOVWF     0x2,0x1                                                                                         
001436   cfde     MOVFF     0xfde,0x10             temp._word = temp._word ^ 0xFFFF;   // Negate                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001438   f010                                                                                                               
00143a   cfdd     MOVFF     0xfdd,0x11                                                                                      
00143c   f011                                                                                                               
00143e   0eff     MOVLW     0xff                                                                                            
001440   1a10     XORWF     0x10,0x1,0x0                                                                                    
001442   1a11     XORWF     0x11,0x1,0x0                                                                                    
001444   c010     MOVFF     0x10,0xfde                                                                                      
001446   ffde                                                                                                               
001448   c011     MOVFF     0x11,0xfdd                                                                                      
00144a   ffdd                                                                                                               
00144c   2adf     INCF      0xdf,0x1,0x0           temp._word++;                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00144e   0e01     MOVLW     0x1                                                                                             
001450   e301     BNC       0x1454                                                                                          
001452   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001454   cfde     MOVFF     0xfde,0x10         temp._word = (temp._word*10U) >> 4;     // Turn into celsius xx.x            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001456   f010                                                                                                               
001458   cfdd     MOVFF     0xfdd,0x11                                                                                      
00145a   f011                                                                                                               
00145c   0e0a     MOVLW     0xa                                                                                             
00145e   0211     MULWF     0x11,0x0                                                                                        
001460   cff3     MOVFF     0xff3,0x11                                                                                      
001462   f011                                                                                                               
001464   0210     MULWF     0x10,0x0                                                                                        
001466   cff3     MOVFF     0xff3,0x10                                                                                      
001468   f010                                                                                                               
00146a   50f4     MOVF      0xf4,0x0,0x0                                                                                    
00146c   2611     ADDWF     0x11,0x1,0x0                                                                                    
00146e   0e04     MOVLW     0x4                                                                                             
001470   90d8     BCF       0xd8,0x0,0x0                                                                                    
001472   3211     RRCF      0x11,0x1,0x0                                                                                    
001474   3210     RRCF      0x10,0x1,0x0                                                                                    
001476   04e8     DECF      0xe8,0x0,0x0                                                                                    
001478   e1fb     BNZ       0x1470                                                                                          
00147a   c010     MOVFF     0x10,0xfde                                                                                      
00147c   ffde                                                                                                               
00147e   c011     MOVFF     0x11,0xfdd                                                                                      
001480   ffdd                                                                                                               
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                               /* Populate string */                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001482   0e04     MOVLW     0x4                for(i=4;i>0;i--)                                                             C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001484   6ef3     MOVWF     0xf3,0x0                                                                                        
001486   0e02     MOVLW     0x2                                                                                             
001488   cff3     MOVFF     0xff3,0xfdb                                                                                     
00148a   ffdb                                                                                                               
00148c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00148e   0800     SUBLW     0x0                                                                                             
001490   e233     BC        0x14f8                                                                                          
0014f2   0e02     MOVLW     0x2                                                                                             
0014f4   06db     DECF      0xdb,0x1,0x0                                                                                    
0014f6   d7ca     BRA       0x148c                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001492   cfde     MOVFF     0xfde,0x10             tempString[i] = (((char)(temp._word % 10)) & 0x0F) | 0x30;               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001494   f010                                                                                                               
001496   cfdd     MOVFF     0xfdd,0x11                                                                                      
001498   f011                                                                                                               
00149a   0e0a     MOVLW     0xa                                                                                             
00149c   6e0b     MOVWF     0xb,0x0                                                                                         
00149e   6a0c     CLRF      0xc,0x0                                                                                         
0014a0   c010     MOVFF     0x10,0x6                                                                                        
0014a2   f006                                                                                                               
0014a4   c011     MOVFF     0x11,0x7                                                                                        
0014a6   f007                                                                                                               
0014a8   ecd9     CALL      0x19b2,0x0                                                                                      
0014aa   f00c                                                                                                               
0014ac   c002     MOVFF     0x2,0x10                                                                                        
0014ae   f010                                                                                                               
0014b0   c003     MOVFF     0x3,0x11                                                                                        
0014b2   f011                                                                                                               
0014b4   0e0f     MOVLW     0xf                                                                                             
0014b6   1410     ANDWF     0x10,0x0,0x0                                                                                    
0014b8   0930     IORLW     0x30                                                                                            
0014ba   6ee6     MOVWF     0xe6,0x0                                                                                        
0014bc   0e02     MOVLW     0x2                                                                                             
0014be   50db     MOVF      0xdb,0x0,0x0                                                                                    
0014c0   6aea     CLRF      0xea,0x0                                                                                        
0014c2   0f02     ADDLW     0x2                                                                                             
0014c4   6ee9     MOVWF     0xe9,0x0                                                                                        
0014c6   0e01     MOVLW     0x1                                                                                             
0014c8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0014ca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014cc   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0014ce   6eef     MOVWF     0xef,0x0                                                                                        
0014d0   cfd9     MOVFF     0xfd9,0xfe9            temp._word /= 10;                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0014d2   ffe9                                                                                                               
0014d4   cfda     MOVFF     0xfda,0xfea                                                                                     
0014d6   ffea                                                                                                               
0014d8   0e0a     MOVLW     0xa                                                                                             
0014da   6e0b     MOVWF     0xb,0x0                                                                                         
0014dc   6a0c     CLRF      0xc,0x0                                                                                         
0014de   cfee     MOVFF     0xfee,0x6                                                                                       
0014e0   f006                                                                                                               
0014e2   cfed     MOVFF     0xfed,0x7                                                                                       
0014e4   f007                                                                                                               
0014e6   ecd9     CALL      0x19b2,0x0                                                                                      
0014e8   f00c                                                                                                               
0014ea   c006     MOVFF     0x6,0xfee                                                                                       
0014ec   ffee                                                                                                               
0014ee   c007     MOVFF     0x7,0xfed                                                                                       
0014f0   ffed                                                                                                               
                                               }//end for                                                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                               /* Turn leading zeros into spaces */                                         C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0014f8   0e30     MOVLW     0x30               if(tempString[1] == '0')                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
0014fa   0101     MOVLB     0x1                                                                                             
0014fc   5d03     SUBWF     0x3,0x0,0x1                                                                                     
0014fe   e107     BNZ       0x150e                                                                                          
                                               {                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001500   0e20     MOVLW     0x20                   tempString[1] = ' ';                                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001502   6f03     MOVWF     0x3,0x1                                                                                         
001504   0e30     MOVLW     0x30                   if(tempString[2] == '0')                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001506   5d04     SUBWF     0x4,0x0,0x1                                                                                     
001508   e102     BNZ       0x150e                                                                                          
00150a   0e20     MOVLW     0x20                       tempString[2] = ' ';                                                 C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00150c   6f04     MOVWF     0x4,0x1                                                                                         
                                               }//end if                                                                    C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                               /* Adjust decimal digit */                                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00150e   c106     MOVFF     0x106,0x107        tempString[5] = tempString[4];                                               C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001510   f107                                                                                                               
001512   0e2e     MOVLW     0x2e               tempString[4]='.';                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001514   6f06     MOVWF     0x6,0x1                                                                                         
001516   0ef8     MOVLW     0xf8               tempString[6]=0xF8;     // Degree symbol                                     C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001518   6f08     MOVWF     0x8,0x1                                                                                         
00151a   0e43     MOVLW     0x43               tempString[7]='C';                                                           C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
00151c   6f09     MOVWF     0x9,0x1                                                                                         
00151e   0e0d     MOVLW     0xd                tempString[8]='\r';                                                          C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001520   6f0a     MOVWF     0xa,0x1                                                                                         
001522   6b0b     CLRF      0xb,0x1            tempString[9]=0x00;     // Null-Terminated                                   C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001524   cfd9     MOVFF     0xfd9,0xfe1    }//end UpdateCelsiusASCII                                                        C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
001526   ffe1                                                                                                               
001528   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00152a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00152c   ffd9                                                                                                               
00152e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /** EOF temperature.c ********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\user\temperature.c
                                           /*********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *********************************************************************           C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * FileName:        main.c                                                       C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * license.                                                                      C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *                                                                               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                            ********************************************************************/           C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           #include "system\typedefs.h"                        // Required                  C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           /** V E C T O R  R E M A P P I N G *******************************************/  C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                                                                                                            C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           extern void _startup (void);        // See c018i.c in your C18 compiler dir      C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           #pragma code _RESET_INTERRUPT_VECTOR = 0x000800                                  C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           void _reset (void)                                                               C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           {                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
000800   efef     GOTO      0x19de             _asm goto _startup _endasm                                                   C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
000802   f00c                                                                                                               
000804   0012     RETURN    0x0            }                                                                                C:\MCHPFSUSB PICC18\fw\Cdc\Startup.c
                                           ;	RCS Header $Id: aarg.asm,v 1.2 2004/10/01 19:13:22 GrosbaJ Exp $               C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           REMB3                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB7		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           REMB2                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB6		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           REMB1                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB5		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           REMB0                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB4		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB3		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB2		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB1		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB0		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AEXP		RES 1       ; 8 bit biased exponent for argument A                         C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL	AARGB0, AARGB1, AARGB2, AARGB3                                           C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   GLOBAL  AARGB4, AARGB5, AARGB6, AARGB7                                   C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL  AEXP                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL  REMB3, REMB2, REMB1, REMB0                                              C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   LIST P=18F4550                                                           C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                                   LIST                                                                     C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                           ;	RCS Header $Id: barg.asm,v 1.2 2004/10/01 19:13:22 GrosbaJ Exp $               C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BARGB3		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BARGB2		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BARGB1		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BARGB0		RES 1       ; most significant byte of argument B                        C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BEXP		RES 1       ; 8 bit biased exponent for argument B                         C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   GLOBAL  BARGB3, BARGB2, BARGB1, BARGB0                                   C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   GLOBAL  BEXP                                                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;	RCS Header $Id: cmath18.asm,v 1.4 2004/10/01 19:13:22 GrosbaJ Exp $            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           SIGN		RES 1       ; save location for sign in MSB                                C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           FPFLAGSbits                                                                      C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           FPFLAGS		RES 1       ; floating point library exception flags                    C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                   GLOBAL  SIGN, FPFLAGS, FPFLAGSbits                                       C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           	                                                                                C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           /*** Unsigned Integer Division: 16-bit by 16-bit                                 C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***                                                                             C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            *** Optimized: Dec. 21, 2000                                                    C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***        by: Daniel R. Madill, Quanser Consulting Inc.                        C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***       for: Saved (for the worst case) at least 5*16 = 80 instruction cycles C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***            over the code supplied with MCC18 v1.00.12                       C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***/                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           void FXD1616U (/*unsigned arg0, unsigned arg1*/)                                 C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           {                                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                             // use INDF1 for the counter...                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                 _asm                                                                       C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               // REM = 0                                                                   C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019b2   6a03     CLRF      0x3,0x0            clrf REMB0, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019b4   6a02     CLRF      0x2,0x0            clrf REMB1, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               // INDF1 = 16                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019b6   0e10     MOVLW     0x10               movlw 16                                                                     C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019b8   6ee7     MOVWF     0xe7,0x0           movwf INDF1, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               // Clear the carry                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019ba   90d8     BCF       0xd8,0x0,0x0   	bcf STATUS, 0, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           loop:                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	//AARG16 <<= 1; Carry is always clear at this point.                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019bc   3606     RLCF      0x6,0x1,0x0    	rlcf AARGB1, 1, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019be   3607     RLCF      0x7,0x1,0x0    	rlcf AARGB0, 1, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	//PROD = (PROD << 1) | (AARG16 >> 16)                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019c0   3602     RLCF      0x2,0x1,0x0    	rlcf REMB1, 1, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019c2   3603     RLCF      0x3,0x1,0x0    	rlcf REMB0, 1, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	                                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	//if (PROD >= BARG16)                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019c4   500b     MOVF      0xb,0x0,0x0    	movf BARGB1, 0, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019c6   5c02     SUBWF     0x2,0x0,0x0    	subwf REMB1, 0, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019c8   500c     MOVF      0xc,0x0,0x0    	movf BARGB0, 0, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019ca   5803     SUBWFB    0x3,0x0,0x0    	subwfb REMB0, 0, 0                                                              C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019cc   e305     BNC       0x19d8         	bnc endloop                                                                     C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               //{                                                                          C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	    //PROD -= BARG16;                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019ce   500b     MOVF      0xb,0x0,0x0    	    movf BARGB1, 0, 0                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019d0   5e02     SUBWF     0x2,0x1,0x0    	    subwf REMB1, 1, 0                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019d2   500c     MOVF      0xc,0x0,0x0    	    movf BARGB0, 0, 0                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019d4   5a03     SUBWFB    0x3,0x1,0x0    	    subwfb REMB0, 1, 0                                                          C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	    //++AARG16; Since AARG16 was shift to the left above, the increment will    C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                   //          simply set the LSbit. Using incf also clears the carry, which C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                   //          means we don't have to clear the carry at the top of the loop. C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019d6   2a06     INCF      0x6,0x1,0x0            incf AARGB1, 1, 0                                                        C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               //}                                                                          C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           endloop:                                                                         C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019d8   2ee7     DECFSZ    0xe7,0x1,0x0       decfsz INDF1, 1, 0    // does not affect the carry bit                       C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019da   d7f0     BRA       0x19bc             bra loop                                                                     C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                             _endasm                                                                        C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                             /* result in AARG already... */                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019dc   0012     RETURN    0x0            }                                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           /* $Id: spi_open.c,v 1.1 2004/10/06 23:00:51 curtiss Exp $ */                    C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #include <spi.h>                                                                 C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           /********************************************************************            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *   Function Name:  OpenSPI                                         *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *   Return Value:   void                                            *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *   Parameters:     SSP peripheral setup bytes                      *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *   Description:    This function sets up the SSP module on a       *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *                   PIC18Cxxx device for use with a Microchip SPI   *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *                   EEPROM device or SPI bus device.                *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           ********************************************************************/            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001814   cfd9     MOVFF     0xfd9,0xfe6    void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001816   ffe6                                                                                                               
001818   cfda     MOVFF     0xfda,0xfe6                                                                                     
00181a   ffe6                                                                                                               
00181c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00181e   ffd9                                                                                                               
001820   cfe2     MOVFF     0xfe2,0xfda                                                                                     
001822   ffda                                                                                                               
                                           {                                                                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001824   0e3f     MOVLW     0x3f             SSPSTAT &= 0x3F;                // power on state                              C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001826   16c7     ANDWF     0xc7,0x1,0x0                                                                                    
001828   6ac6     CLRF      0xc6,0x0         SSPCON1 = 0x00;                 // power on state                              C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00182a   0efd     MOVLW     0xfd             SSPCON1 |= sync_mode;           // select serial mode                          C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00182c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00182e   12c6     IORWF     0xc6,0x1,0x0                                                                                    
001830   0efb     MOVLW     0xfb             SSPSTAT |= smp_phase;           // select data input sample phase              C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001832   50db     MOVF      0xdb,0x0,0x0                                                                                    
001834   12c7     IORWF     0xc7,0x1,0x0                                                                                    
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001836   0efc     MOVLW     0xfc             switch( bus_mode )                                                             C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001838   50db     MOVF      0xdb,0x0,0x0                                                                                    
00183a   0a03     XORLW     0x3                                                                                             
00183c   e009     BZ        0x1850                                                                                          
00183e   0a01     XORLW     0x1                                                                                             
001840   e004     BZ        0x184a                                                                                          
001842   0a02     XORLW     0x2                                                                                             
001844   e106     BNZ       0x1852                                                                                          
                                             {                                                                              C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 0:                       // SPI bus mode 0,0                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001846   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001848   d004     BRA       0x1852               break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 2:                       // SPI bus mode 1,0                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00184a   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00184c   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00184e   d001     BRA       0x1852               break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 3:                       // SPI bus mode 1,1                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001850   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               default:                      // default SPI bus mode 0,1                    C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                             }                                                                              C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001852   0efd     MOVLW     0xfd             switch( sync_mode )                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001854   50db     MOVF      0xdb,0x0,0x0                                                                                    
001856   0a05     XORLW     0x5                                                                                             
001858   e003     BZ        0x1860                                                                                          
00185a   0a01     XORLW     0x1                                                                                             
00185c   e104     BNZ       0x1866                                                                                          
                                             {                                                                              C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 4:                       // slave mode w /SS enable                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #if defined(__18F6310) || defined(__18F6390) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F6410) || defined(__18F6490) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F8310) || defined(__18F8390) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F8410) || defined(__18F8490)                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 TRISFbits.TRISF7 = 1;       // define /SS pin as input                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #else                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00185e   8a92     BSF       0x92,0x5,0x0         TRISAbits.TRISA5 = 1;       // define /SS pin as input                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #endif                                                                           C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 5:                       // slave mode w/o /SS enable                   C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001860   8293     BSF       0x93,0x1,0x0         TRISBbits.TRISB1 = 1;       // define clock pin as input                   C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #else                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 TRISCbits.TRISC3 = 1;       // define clock pin as input                   C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #endif                                                                           C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001862   9ec7     BCF       0xc7,0x7,0x0         SSPSTATbits.SMP = 0;        // must be cleared in slave SPI mode           C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001864   d001     BRA       0x1868               break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               default:                      // master mode, define clock pin as output     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001866   9293     BCF       0x93,0x1,0x0         TRISBbits.TRISB1 = 0;       // define clock pin as output                  C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #else                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 TRISCbits.TRISC3 = 0;       // define clock pin as output                  C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #endif                                                                           C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                             }                                                                              C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001868   9e94     BCF       0x94,0x7,0x0     TRISC &= 0x7F;                  // define SDO as output (master or slave)      C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00186a   8093     BSF       0x93,0x0,0x0     TRISB |= 0x01;                  // define SDI as input (master or slave)       C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #else                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                             TRISC &= 0xDF;                  // define SDO as output (master or slave)      C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                             TRISC |= 0x10;                  // define SDI as input (master or slave)       C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #endif                                                                           C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00186c   8ac6     BSF       0xc6,0x5,0x0     SSPCON1 |= SSPENB;              // enable synchronous serial port              C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
00186e   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_open.c
001870   cfe5     MOVFF     0xfe5,0xfda                                                                                     
001872   ffda                                                                                                               
001874   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001876   ffd9                                                                                                               
001878   0012     RETURN    0x0                                                                                             
                                           /* $Id: spi_read.c,v 1.1 2004/10/06 23:00:51 curtiss Exp $ */                    C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           #include <spi.h>                                                                 C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           /********************************************************************            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           *     Function Name:    ReadSPI                                     *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           *     Return Value:     contents of SSPBUF register                 *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           *     Parameters:       void                                        *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           *     Description:      Read single byte from SPI bus.              *            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           ********************************************************************/            C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           unsigned char ReadSPI( void )                                                    C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           {                                                                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
0019f6   6ac9     CLRF      0xc9,0x0         SSPBUF = 0x00;                  // initiate bus cycle                          C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
0019f8   a0c7     BTFSS     0xc7,0x0,0x0     while ( !SSPSTATbits.BF );      // wait until cycle complete                   C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
0019fa   d7fe     BRA       0x19f8                                                                                          
0019fc   50c9     MOVF      0xc9,0x0,0x0     return ( SSPBUF );              // return with byte read                       C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
0019fe   0012     RETURN    0x0            }                                                                                C:\mcc18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           /* $Id: uputs.c,v 1.1 2003/12/09 22:52:09 GrosbaJ Exp $ */                       C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           #include <usart.h>                                                               C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           /**********************************************************************          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *    Function Name:  putsUSART                                        *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *    Return Value:   void                                             *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *    Parameters:     data: pointer to string of data                  *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *    Description:    This routine transmits a string of characters    *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *                    to the USART including the null.                 *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           **********************************************************************/          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018d2   cfd9     MOVFF     0xfd9,0xfe6    void putsUSART( char *data)                                                      C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018d4   ffe6                                                                                                               
0018d6   cfda     MOVFF     0xfda,0xfe6                                                                                     
0018d8   ffe6                                                                                                               
0018da   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0018dc   ffd9                                                                                                               
0018de   cfe2     MOVFF     0xfe2,0xfda                                                                                     
0018e0   ffda                                                                                                               
                                           {                                                                                C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                             do                                                                             C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                             {  // Transmit a byte                                                          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018e2   a2ac     BTFSS     0xac,0x1,0x0       while(BusyUSART());                                                          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018e4   d7fe     BRA       0x18e2                                                                                          
0018e6   0efc     MOVLW     0xfc               putcUSART(*data);                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018e8   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0018ea   ffe9                                                                                                               
0018ec   0efd     MOVLW     0xfd                                                                                            
0018ee   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0018f0   ffea                                                                                                               
0018f2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0018f4   6ee6     MOVWF     0xe6,0x0                                                                                        
0018f6   ecc2     CALL      0x1984,0x0                                                                                      
0018f8   f00c                                                                                                               
0018fa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0018fc   0efc     MOVLW     0xfc             } while( *data++ );                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018fe   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001900   ffe9                                                                                                               
001902   2adb     INCF      0xdb,0x1,0x0                                                                                    
001904   0efd     MOVLW     0xfd                                                                                            
001906   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001908   ffea                                                                                                               
00190a   e301     BNC       0x190e                                                                                          
00190c   2adb     INCF      0xdb,0x1,0x0                                                                                    
00190e   50ef     MOVF      0xef,0x0,0x0                                                                                    
001910   e1e8     BNZ       0x18e2                                                                                          
001912   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
001914   cfe5     MOVFF     0xfe5,0xfda                                                                                     
001916   ffda                                                                                                               
001918   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00191a   ffd9                                                                                                               
00191c   0012     RETURN    0x0                                                                                             
                                           /* $Id: uwrite.c,v 1.1 2003/12/09 22:52:09 GrosbaJ Exp $ */                      C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           #include <usart.h>                                                               C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           extern union USART USART_Status;                                                 C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           /********************************************************************            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           *    Function Name:  WriteUSART                                     *            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           *    Return Value:   none                                           *            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           *    Parameters:     data: data to transmit                         *            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           *    Description:    This routine transmits a byte out the USART.   *            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           ********************************************************************/            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001984   cfd9     MOVFF     0xfd9,0xfe6    void WriteUSART(char data)                                                       C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001986   ffe6                                                                                                               
001988   cfda     MOVFF     0xfda,0xfe6                                                                                     
00198a   ffe6                                                                                                               
00198c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00198e   ffd9                                                                                                               
001990   cfe2     MOVFF     0xfe2,0xfda                                                                                     
001992   ffda                                                                                                               
                                           {                                                                                C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001994   acac     BTFSS     0xac,0x6,0x0     if(TXSTAbits.TX9)  // 9-bit mode?                                              C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001996   d004     BRA       0x19a0                                                                                          
                                             {                                                                              C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001998   90ac     BCF       0xac,0x0,0x0       TXSTAbits.TX9D = 0;       // Set the TX9D bit according to the               C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
00199a   0100     MOVLB     0x0                if(USART_Status.TX_NINE)  // USART Tx 9th bit in status reg                  C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
00199c   b3ff     BTFSC     0xff,0x1,0x1                                                                                    
00199e   80ac     BSF       0xac,0x0,0x0         TXSTAbits.TX9D = 1;                                                        C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                             }                                                                              C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
0019a0   0efd     MOVLW     0xfd             TXREG = data;      // Write the data byte to the USART                         C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
0019a2   50db     MOVF      0xdb,0x0,0x0                                                                                    
0019a4   6ead     MOVWF     0xad,0x0                                                                                        
0019a6   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
0019a8   cfe5     MOVFF     0xfe5,0xfda                                                                                     
0019aa   ffda                                                                                                               
0019ac   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0019ae   ffd9                                                                                                               
0019b0   0012     RETURN    0x0                                                                                             
                                           /* $Id: usartd.c,v 1.1 2003/12/09 22:52:09 GrosbaJ Exp $ */                      C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                           #include <usart.h>                                                               C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                           // USART Status Structure                                                        C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                           union USART USART_Status;                                                        C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
